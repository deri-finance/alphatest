{"version":3,"sources":["utils/DeriNumberFormat.js","pages/Pool/img/staked.svg","pages/Pool/Card.js"],"names":["Wrapper","styled","NumberFormat","props","width","LoadLine","div","test","height","DeriNumberFormat","useState","className","renderablity","setRenderablity","firstTime","setFirstTime","isValidate","allowZero","value","undefined","isNaN","Math","abs","useEffect","wallet","defaultValue","others","bg","toFixed","decimalScale","countDecimal","toPlainString","displayType","fixedDecimalScale","thousandSeparator","closeShowLoadingEffectAfterLoaded","timeout","window","setTimeout","clearTimeout","suffix","Card","lang","pool","history","useHistory","poolInfo","setPoolinfo","isStaked","setIsStaked","xvsNum","setXvsNum","getPoolInfo","a","res","getVenusEarned","version","address","getIsStaked","onImgError","event","target","src","errorimg","isConnected","detail","account","url","chainId","type","onClick","push","staking","classNames","v3","isAllV3","alt","BSC","POLYGON","ETH","networkLogo","zone","chain","toUpperCase","isLp","bTokens","bTokenSymbol","map","item","index","onError","TokenExplode","apy","liquidity","stakedLogo","disabled","outline","label","TokenWrapper","Token","rotate","TokenItem","angle","length","filter","t","i","token","curRotate"],"mappings":"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","file":"static/js/5.e3668149.chunk.js","sourcesContent":["import React,{useState,useEffect,useRef} from 'react'\nimport ReactDOM from 'react-dom'\nimport NumberFormat from 'react-number-format'\nimport { inject, observer } from 'mobx-react';\nimport styled from 'styled-components';\nimport { toPlainString,countDecimal } from './utils';\nimport { bg } from '../lib/web3js';\nconst Wrapper = styled(NumberFormat)`\n  width : ${props => props.width}px;\n`\nconst LoadLine = styled.div`\n  width : ${props => /px$/.test(props.width) ? props.width : `${props.width}px`};\n  height : ${props => /px$/.test(props.height) ? props.height : `${props.height}px`};\n`\nfunction DeriNumberFormat(props){\n  const [renderablity, setRenderablity] = useState(<span className='loading-line'></span>);\n  const [firstTime, setFirstTime] = useState(true)\n  const isValidate = () => {\n    const {allowZero} = props \n    return (typeof props.value !== 'object' && props.value !== undefined && props.value !== '' && !isNaN(props.value) && props.value !== 'NaN') \n          || ((Math.abs(props.value)) === 0 && allowZero === true )\n  }\n\n  useEffect(() => {\n    const {allowZero,wallet,defaultValue = '--',...others} = props \n    if(isValidate()) {\n      //如果精度截取之后为0，则动态获取精度，取到不为0为止\n      if(!allowZero && others.value && /\\d+\\.0*[1-9]+/.test(others.value)  && (+bg(others.value).toFixed((+others.decimalScale || 2))) === 0){\n        others.decimalScale = countDecimal(Math.abs(others.value)) + 1\n      }\n      others.value = toPlainString(others.value)\n      if(others.value && /\\d+.9{6}/.test(others.value)){\n        others.value = (+others.value).toFixed(5)\n      }\n      setRenderablity(<Wrapper {...others}  displayType = 'text'  fixedDecimalScale={true} thousandSeparator={true}/>)\n    } else if(firstTime){\n      setRenderablity(<LoadLine className='loading-line' {...props}></LoadLine>)\n      if(props.closeShowLoadingEffectAfterLoaded){\n        setFirstTime(false)\n      }\n    } \n    const timeout = window.setTimeout(() => {\n      // && wallet && (!wallet.isConnected() || !wallet.supportChain)\n      if(!isValidate()){\n        setRenderablity(defaultValue)\n      }\n    },30000)\n    return () => {\n      clearTimeout(timeout)\n    };\n  }, [props.value,props.decimalScale,props.suffix]);\n\n  return renderablity;\n}\nexport default DeriNumberFormat\n// export default inject('wallet')(observer(DeriNumberFormat))","export default __webpack_public_path__ + \"static/media/staked.45c27f0b.svg\";","import React, { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom';\nimport DeriNumberFormat from \"../../utils/DeriNumberFormat\"\nimport Button from '../../components/Button/Button'\nimport BSC from '../../assets/img/bsc-logo.svg'\nimport POLYGON from '../../assets/img/polygon-logo.svg'\nimport ETH from '../../assets/img/ethereum.svg'\nimport stakedLogo from './img/staked.svg'\nimport errorimg from '../../assets/img/ErrorImg.png'\nimport classNames from 'classnames'\nimport './card.less'\nimport styled from 'styled-components';\nexport default function Card({ lang, pool, wallet }) {\n  const history = useHistory();\n  // const [textLink,setTextLink] = useState('')\n  const [poolInfo, setPoolinfo] = useState({})\n  const [isStaked, setIsStaked] = useState(false)\n  const [xvsNum,setXvsNum] = useState()\n  const getPoolInfo = async () => {\n    setPoolinfo({})\n    let res = await pool.getPoolInfo(wallet, pool)\n    setPoolinfo(res)\n  }\n  const getVenusEarned = async ()=>{\n    if(pool && (pool.version ==='v3' || pool.version === 'v3_lite')){\n      let res =  await pool.getVenusEarned(wallet, pool.address)\n      setXvsNum(res)\n    }\n  }\n  const getIsStaked = async () => {\n    let res = await pool.getIsStaked(wallet, pool)\n    setIsStaked(res.isStaked)\n  }\n  const onImgError = (event) => {\n    event.target.src = errorimg\n  }\n  useEffect(() => {\n    getPoolInfo()\n    if (wallet.isConnected()) {\n      getIsStaked()\n      getVenusEarned()\n    }\n  }, [pool, wallet.detail.account])\n  const networkLogo = (chainId) => {\n    let src;\n    if (chainId === \"56\" || chainId === \"97\") {\n      src = BSC\n    } else if (chainId === \"137\") {\n      src = POLYGON\n    } else if (chainId === \"1\") {\n      src = ETH\n    }\n    return src\n  }\n  const staking = (url) => {\n    if (pool.version === 'v2_lite_open') {\n      return\n    }\n    history.push(url)\n  }\n  const url = `/pool/${pool.version || 'v1'}/${pool.chainId}/${pool.type}/${pool.address}`\n  return (\n    <div className={pool.version === 'v2_lite_open' ? 'card-list open-list' : 'card-list'} onClick={() => { staking(url) }} >\n      <div className={classNames('card-header',{v3 : pool.isAllV3})}>\n        <div className='pool-network-type'>\n          <div className='network-logo'>\n            <img alt='' src={networkLogo(pool.chainId)} />\n          </div>\n          <div className='pool-type-network-text'>\n            <div className='pool-type-text'>\n              {lang[pool.type]} {lang[pool.zone]}\n            </div>\n            <div className='pool-network-text'>\n              {pool.chain.toUpperCase()}\n            </div>\n          </div>\n        </div>\n        <div className='base-token-logo'>\n          {pool.isLp && <>\n            <div className='lp-base-token-bg'>\n              <div className={`base-token-bg ${pool.bTokens[0].bTokenSymbol}`}></div>\n              <span className='lp-con'>+</span>\n              <div className={`base-token-bg ${pool.bTokens[1].bTokenSymbol}`}></div>\n            </div>\n          </>}\n          {!pool.isLp && pool.version !== 'v3' && pool.version !== \"v3_lite\" && <>\n            {pool.bTokens.map((item, index) => <div key={index} className='base-token-box-bg'>\n              <div className={`base-token-bg ${item.bTokenSymbol}`}>\n                {pool.version === 'v2_lite_open' && <>\n                  <img alt='' onError={onImgError} src={`https://raw.githubusercontent.com/deri-finance/deri-open-zone/main/img/${item.bTokenSymbol}.png`} />\n                </>}\n              </div>\n            </div>)}\n          </>}\n          {(pool.version === \"v3\" || pool.version === \"v3_lite\") && \n            <TokenExplode bTokens={pool.bTokens}/>\n          }\n        </div>\n      </div>\n      <div className='card-content'>\n        <div className='max-apy'>\n          {pool.version !== 'v2_lite_open' && <>\n            <div className='max-apy-title'>\n              {(pool.version === 'v2' || pool.version === \"v3_lite\" || pool.version === \"v3\") ? lang['max-apy'] : lang['apy']}\n            </div>\n            <div className='max-apy-num'>\n              <DeriNumberFormat value={poolInfo.apy} suffix='%' displayType='text' allowZero={true} decimalScale={2} />\n            </div>\n          </>}\n        </div>\n        <div className='total-pool-liquidity'>\n          <div className='total-liquidity-title'>\n            {lang['total-pool-liquidity']}\n          </div>\n          <div className='total-liquidity-num'>\n            <DeriNumberFormat value={poolInfo.liquidity} displayType='text' thousandSeparator={true} decimalScale={pool.type === 'lp' ? 7 : 0} />\n          </div>\n        </div>\n        <div className='your-deri-epoch'>\n          {isStaked && <div className='staked-box'>\n            <img src={stakedLogo} alt='' />\n            {lang['staked']}\n          \n          </div>  }\n          {(+xvsNum > 0) && (pool.version === 'v3' || pool.version === 'v3_lite') && <span className='xvs-collectable'><div className='staked-box'><DeriNumberFormat width='50px' value={xvsNum} displayType='text' thousandSeparator={true} decimalScale={2} /> &nbsp; XVS  {lang['collectable']}</div></span> }\n        </div>\n        <div className='stake-button'>\n          <Button disabled={pool.version === 'v2_lite_open' ? true : false} className='button' outline label={pool.version === 'v2_lite_open' ? lang['operating'] : lang['stake']} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst TokenWrapper = styled.div`\n  @keyframes explode {\n    0% {\n        transform: translateX(0px);\n    }\n    100% {\n        transform: translateX(100px);\n    }\n  }\n  .base-token{\n    margin-left: 0px!important;\n    z-index : -2;\n    visibility: hidden;\n    background-color: #111e34;\n  }\n  .base-token-box-bg.explode:hover .move  {\n    -webkit-animation : move .4s .0s linear;\n    animation: explode .4s .0s linear;\n    visibility: visible;    \n    transform : translateX(100px)!important;\n  }\n  .base-token-box-bg.explode:hover .base-token {\n    z-index : 2!important;\n  } \n\n`\nconst Token = styled.div`\n  // transform-origin: 0px 0px;\n  position: absolute;\n  // transform : ${props => `rotate(${-props.rotate}deg) translateX(0px) translateX(${props.width}px) rotate(${props.rotate}deg)` };\n  transform : ${props => `rotate(${-props.rotate}deg)` };\n  width: 48px;\n  height: 48px;\n  display: inline-block;\n  border-radius: 50%;\n`\n\nconst TokenItem = styled.div`\n  &.move {\n    // transform : ${props => `rotate(${props.rotate}deg) translateX(100px)!important` }\n  }\n`\n\nconst TokenExplode = ({bTokens = []}) => {\n  const angle = 360 / bTokens.length\n  return (\n    <TokenWrapper className='v3-tokens'>\n        <div className='tokens'>\n          {bTokens.filter((t,i) => i < 3).map(token => (\n            <div className='base-token-box-bg'>\n              <div className={`base-token-bg ${token.bTokenSymbol}`}>\n              </div>\n            </div>\n          ))}\n        </div>\n        <div className='base-token-box-bg explode'>\n          <div className={'base-token-bg'}>\n            {bTokens.length - 3} +\n          </div>\n          {bTokens.map((token,index) => {\n            const curRotate = angle * index\n            return (\n              <Token className='base-token' rotate={curRotate} width='100'>\n                <TokenItem width='100' rotate={curRotate} className={`base-token-bg move ${token.bTokenSymbol}`} >\n                </TokenItem>\n              </Token>\n            )\n          })}\n        </div>\n      </TokenWrapper>\n  )\n}"],"sourceRoot":""}