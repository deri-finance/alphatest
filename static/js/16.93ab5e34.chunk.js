(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[16],{610:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(0),a=s.n(n),c=s(4),l=s(34),i=s(3),r=s(17);function o(e){var t=e.btnText,s=e.className,n=e.disabled,o=e.click,d=e.afterClick,b=e.checkApprove,j=e.wallet,p=e.spec,u=e.lang,O=Object(i.useState)(n?"disabled":"enabled"),m=Object(l.a)(O,2),h=m[0],f=m[1],x=Object(i.useState)(!0),v=Object(l.a)(x,2),y=v[0],g=v[1],k=Object(i.useState)(!1),N=Object(l.a)(k,2),I=N[0],w=N[1],S=Object(i.useState)(t),T=Object(l.a)(S,2),A=T[0],$=T[1],C=Object(i.useRef)(null),F=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===h){e.next=2;break}return e.abrupt("return");case 2:return E(),e.next=5,o();case 5:e.sent&&d&&d(),q();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){f("disabled"),w(!0),C.current&&(C.current.style.display="inline-block")},q=function(){C.current&&(C.current.style.display="none"),f("enabled"),w(!1)},_=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b&&j&&j.detail.account)){e.next=5;break}return e.next=3,j.isApproved(p.pool,p.bTokenId);case 3:t=e.sent,g(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(),e.next=3,j.approve(p.pool,p.bTokenId);case 3:e.sent.success?g(!0):(g(!1),alert(u["approve-failed"])),q();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return _(),function(){}}),[j,p,b]),Object(i.useEffect)((function(){return t&&$(t),function(){}}),[t]),Object(r.jsxs)("button",{className:s,onClick:function(){y?F():G()},children:[Object(r.jsx)("span",{className:"btn-loading-wrap",children:Object(r.jsx)("span",{ref:C,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),I?u.pending:y?A:u.approve]})}},611:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s(3),a=s(612),c=s(17);function l(e){const[t,s]=Object(n.useState)("--");return Object(n.useEffect)((()=>{const{allowZero:t,...n}=e;return("object"!==typeof e.value&&void 0!==e.value&&""!==e.value&&"NaN"!==e.value||0===(isNaN(e.value)&&Math.abs(e.value))&&!0===t)&&s(Object(c.jsx)(a.a,{...n,displayType:"text"})),()=>{}}),[e.value]),t}},616:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(3),a=s(15),c=s(90),l=s(31);s(11);const i=a.a.get(),{chainInfo:r}=c[i];function o(e){const[t,s]=Object(n.useState)(!1),[c,o]=Object(n.useState)([]),[d,b]=Object(n.useState)([]),[j,p]=Object(n.useState)([]),[u,O]=Object(n.useState)([]),[m,h]=Object(n.useState)([]),[f,x]=Object(n.useState)([]);return Object(n.useEffect)((()=>{const t=e=>{const t=[];return e.reduce(((e,t)=>{const s=e.find((e=>Object(l.d)(e.pool.address,t.address)));if(s&&s.list.length<5)s.list.push(t);else{const s={pool:{network:t.network,symbol:t.symbol,address:t.address,formatAdd:t.formatAdd,version:t.version,chainId:t.chainId,airdrop:t.airdrop,type:t.type,bTokenSymbol:t.bTokenSymbol,bTokenId:t.bTokenId,symbolId:t.symbolId},list:[t]};e.push(s)}return e}),t),t};let n=Object(a.l)(i,"v2"),d=Object(a.l)(i,"v1");const j=Object(a.l)(i,"v2_lite"),u=Object(a.l)(i,"option"),m=Object(a.D)(i);let f=n.concat(d).concat(m).concat(j).concat(u).reduce(((e,t)=>{const s=e.findIndex((e=>e.chainId===t.chainId&&e.bTokenSymbol===t.bTokenSymbol&&t.version===e.version));return("v2"===t.version||"v2_lite"===t.version||"option"===t.version)&&s>-1&&-1===e[s].symbol.indexOf(t.symbol)?e[s].symbol+=`,${t.symbol}`:e.push(t),e}),[]);f=f.map((async e=>{const t=await Object(a.A)(e.chainId,e.pool,e.bTokenId)||{},s=await Object(a.z)(e.chainId,e.pool,e.bTokenId)||{},n=e.pool||"";return Object.assign(e,{network:r[e.chainId]&&r[e.chainId].name,liquidity:t.liquidity,apy:(100*+s.apy).toFixed(2),formatAdd:Object(l.e)(n),address:n,type:"perpetual",buttonText:"STAKING",multiplier:s.multiplier})}));const v=Object(a.u)(i).map((async e=>{const t=await Object(a.A)(e.chainId,e.pool)||{},s=await Object(a.z)(e.chainId,e.pool)||{},n=e.pool||"";let c,i;if(Object(l.m)(e.pool)){let t=await Object(a.w)(e.chainId,e.pool);c=t&&(100*+t.apy2).toFixed(2)}return Object(l.n)(e.pool)&&(i="SUSHI-APY"),Object(l.l)(e.pool)&&(i="CAKE-APY"),Object.assign(e,{network:r[e.chainId].name,liquidity:t.liquidity,apy:(100*+s.apy).toFixed(2),formatAdd:Object(l.e)(n),lpApy:c,address:n,type:"lp",label:i,buttonText:"STAKING"})})),y=f.concat(v);return Promise.all(y).then((n=>{n.push({network:"BSC",bTokenSymbol:"GIVEAWAY",liquidity:"1002200",symbol:"--",airdrop:!0,chainId:56,buttonText:"CLAIM"});let a=n.filter((e=>("v1"===e.version||!e.version)&&!e.retired)),c=n.filter((e=>("v2"===e.version||"v2_lite"===e.version)&&!e.retired)),l=n.filter((e=>"option"===e.version&&!e.retired));const i=n.filter((e=>e.retired&&!e.premining)),r=n.filter((e=>e.retired&&e.premining));e&&(a=t(a),c=t(c),l=t(l)),p(c),b(a),O(l),o(n),h(i),x(r),s(!0)})),()=>c.length=0}),[]),[t,c,d,j,u,m,f]}},635:function(e,t,s){"use strict";var n=s(3),a=s(21),c=s(90),l=s(15),i=s(611),r=s(46),o=s(610),d=s(31),b=s(609),j=s.n(b),p=s(17);const u=c[l.a.get()].chainInfo;function O({wallet:e,pool:t,card:s,index:c,list:r,lang:b}){const[j,u]=Object(n.useState)(""),[O,m]=Object(n.useState)(!1),h=Object(a.useHistory)(),f=()=>{e.connect().then((()=>{m(!0)}))},x=async()=>{let t=await Object(l.H)(e.detail.account);t.valid?Object(d.d)(e.detail.chainId,t.chainId)?(await Object(l.Q)(t.chainId,e.detail.account)).success||alert(b["claim-failed"]):alert(b["please-switch-to-BSC-to-claim-deri"]):alert(b["no-deri-to-claim"])};return Object(n.useEffect)((()=>{if(t&&t.airdrop)e.isConnected()?u(Object(p.jsx)(o.a,{btnText:b.claim,click:x,lang:b})):u(Object(p.jsx)(o.a,{btnText:b["connect-wallet"],click:f,lang:b}));else{let e=`/mining/${t.version||"v1"}/${t.chainId}/${s.type}/${s.symbol}/${s.bTokenSymbol}/${t.address}`;s.bTokenId&&(e=`${e}?baseTokenId=${s.bTokenId}`),s.symbolId&&(e=e.indexOf("?")>0?`${e}&symbolId=${s.symbolId}`:`${e}?symbolId=${s.symbolId}`),u(Object(p.jsx)("button",{onClick:()=>(e=>{h.push(e)})(e),children:b.staking}))}return()=>{}}),[e.detail.account,O]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"info",children:[Object(p.jsxs)("div",{className:"top-info",children:[Object(p.jsxs)("div",{className:"pool-top",children:[Object(p.jsx)("span",{className:`logo ${s.bTokenSymbol}`}),Object(p.jsx)("span",{className:"base-token",children:s.bTokenSymbol})]}),Object(p.jsxs)("div",{className:"pool-detail",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{className:"title",children:s.airdrop?b.total:b["pool-liq"]}),Object(p.jsx)(i.a,{value:s.liquidity,displayType:"text",thousandSeparator:!0,decimalScale:s.lpApy?7:0})]}),Object(p.jsx)("div",{className:"multiplier",children:s.multiplier&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{children:b.multiplier}),Object(p.jsxs)("span",{className:"multiplier-value",title:b["multiplier-tip"],children:[s.multiplier,"x"]})]})}),Object(p.jsxs)("div",{className:"apy",children:[Object(p.jsx)("span",{children:b.apy}),Object(p.jsxs)("span",{children:[Object(p.jsx)("span",{className:s.lpApy?"sushi-apy-underline":"",title:s.lpApy&&b["deri-apy"],children:s.apy?Object(p.jsx)(i.a,{value:s.apy,suffix:"%",displayType:"text",allowZero:!0,decimalScale:2}):"--"}),s.lpApy&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{children:" + "}),Object(p.jsxs)("span",{className:s.lpApy?"sushi-apy-underline":"",title:s.lpApy&&s.label,children:[" ",Object(p.jsx)(i.a,{value:s.lpApy,displayType:"text",suffix:"%",decimalScale:2})]})]})]})]})]})]}),Object(p.jsx)("div",{className:"bottom-btn",children:j})]}),c!==r.length-1&&Object(p.jsx)("div",{className:"top-line"})]})}t.a=Object(r.b)("wallet","version")(Object(r.c)((function({wallet:e,group:t={},lang:s}){const{pool:n,list:a}=t,c=j()("pool",{"only-one":1===a.length,full:5===a.length});return Object(p.jsxs)("div",{className:c,children:[Object(p.jsxs)("div",{className:"pool-header",children:[Object(p.jsxs)("div",{className:"left",children:[Object(p.jsx)("div",{className:"network",children:n.network&&n.network.toUpperCase()}),Object(p.jsxs)("div",{className:"pool-desc",children:[Object(p.jsxs)("span",{className:"symbol",children:[Object(p.jsxs)("span",{className:"symbol-label",children:[s.symbol,":"]}),Object(p.jsx)("span",{className:"symbol-value",children:n.symbol})]}),Object(p.jsxs)("span",{className:"address",children:[Object(p.jsxs)("span",{className:"address-label",children:[s.address,":"]}),n.airdrop?"--":Object(p.jsx)("a",{target:"_blank",rel:"noreferrer",href:`${u[n.chainId]&&u[n.chainId].viewUrl}/address/${n.address}`,children:n.formatAdd})]})]})]}),Object(p.jsx)("div",{className:"version",children:s[n.version]})]}),Object(p.jsx)("div",{className:"pool-info",children:a.map(((t,c)=>Object(p.jsx)(O,{card:t,index:c,pool:n,list:a,wallet:e,lang:s},c)))})]})})))},711:function(e,t,s){},712:function(e,t,s){},753:function(e,t,s){"use strict";s.r(t);var n=s(3),a=s(635),c=s(616),l=s(609),i=s.n(l),r=(s(711),s(712),s(46)),o=s(17);t.default=Object(r.b)("version","loading")(Object(r.c)((function({lang:e,loading:t}){const[s,l,r,d,b]=Object(c.a)(!0),[j,p]=Object(n.useState)("all"),u=e=>{p(e)},O=i()("checkout-pools",j);return Object(n.useEffect)((()=>(s?t.loaded():t.loading(),()=>{})),[s]),Object(o.jsxs)("div",{className:"mining-info",children:[Object(o.jsxs)("div",{className:O,children:[Object(o.jsx)("div",{className:"all",onClick:()=>u("all"),children:e.all}),Object(o.jsx)("div",{className:"futures",onClick:()=>u("futures"),children:e.futures}),Object(o.jsx)("div",{className:"options",onClick:()=>u("options"),children:e.options})]}),"all"===j&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"pools",children:d.map(((t,s)=>Object(o.jsx)(a.a,{group:t,lang:e},s)))}),Object(o.jsx)("div",{className:"pools",children:b.map(((t,s)=>Object(o.jsx)(a.a,{group:t,lang:e},s)))}),Object(o.jsx)("div",{className:"pools",children:r.map(((t,s)=>Object(o.jsx)(a.a,{group:t,lang:e},s)))})]}),"options"===j&&Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"pools",children:b.map(((t,s)=>Object(o.jsx)(a.a,{group:t,lang:e},s)))})}),"futures"===j&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"pools",children:d.map(((t,s)=>Object(o.jsx)(a.a,{group:t,lang:e},s)))}),Object(o.jsx)("div",{className:"pools",children:r.map(((t,s)=>Object(o.jsx)(a.a,{group:t,lang:e},s)))})]})]})})))}}]);
//# sourceMappingURL=16.93ab5e34.chunk.js.map