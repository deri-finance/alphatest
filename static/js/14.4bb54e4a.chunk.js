(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[14],{621:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(0),n=a.n(r),c=a(1),s=a(18),i=a(7),d=a(56);function l(e){var t=e.btnText,a=e.className,r=e.disabled,l=e.click,u=e.afterClick,o=e.checkApprove,j=e.wallet,b=e.spec,p=e.lang,x=Object(i.useState)(r?"disabled":"enabled"),f=Object(s.a)(x,2),h=f[0],O=f[1],v=Object(i.useState)(!0),m=Object(s.a)(v,2),g=m[0],w=m[1],N=Object(i.useState)(!1),y=Object(s.a)(N,2),S=y[0],k=y[1],M=Object(i.useRef)(null),_=function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===h){e.next=2;break}return e.abrupt("return");case 2:return T(),e.next=5,l();case 5:e.sent&&u&&u(),I();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){O("disabled"),k(!0),M.current&&(M.current.style.display="inline-block")},I=function(){M.current&&(M.current.style.display="none"),O("enabled"),k(!1)},E=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o&&j&&j.detail.account)){e.next=5;break}return e.next=3,j.isApproved(b.pool,b.bTokenId);case 3:t=e.sent,w(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(),e.next=3,j.approve(b.pool,b.bTokenId);case 3:e.sent.success?w(!0):(w(!1),alert(p["approve-failed"])),I();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return E(),function(){}}),[j,b,o]),Object(d.jsxs)("button",{className:a,onClick:function(){g?_():F()},children:[Object(d.jsx)("span",{className:"btn-loading-wrap",children:Object(d.jsx)("span",{ref:M,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),S?p.pending:g?t:p.approve]})}},622:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(27),n=a(175),c=a(18),s=a(7),i=a(623),d=a(56);function l(e){var t=Object(s.useState)("--"),a=Object(c.a)(t,2),l=a[0],u=a[1];return Object(s.useEffect)((function(){var t=e.allowZero,a=Object(n.a)(e,["allowZero"]);return(void 0!==e.value&&""!==e.value&&"NaN"!==e.value||0===(isNaN(e.value)&&Math.abs(e.value))&&!0===t)&&u(Object(d.jsx)(i.a,Object(r.a)(Object(r.a)({},a),{},{displayType:"text"}))),function(){}}),[e.value]),l}},627:function(e,t,a){"use strict";function r(e,t){for(var a=e.toString();a.length<t;)a="0"+a;return a}function n(e){return r(e,2)}function c(t,a){"string"!==typeof t&&(a=t,t=e.exports.ISO8601_FORMAT),a||(a=e.exports.now());var c=n(a.getDate()),s=n(a.getMonth()+1),i=n(a.getFullYear()),d=n(i.substring(2,4)),l=t.indexOf("yyyy")>-1?i:d,u=n(a.getHours()),o=n(a.getMinutes()),j=n(a.getSeconds()),b=r(a.getMilliseconds(),3),p=function(e){var t=Math.abs(e),a=String(Math.floor(t/60)),r=String(t%60);return 1===a.length&&(a="0"+a),1===r.length&&(r="0"+r),e<0?"+"+a+r:"-"+a+r}(a.getTimezoneOffset());return t.replace(/dd/g,c).replace(/MM/g,s).replace(/y{1,4}/g,l).replace(/hh/g,u).replace(/mm/g,o).replace(/ss/g,j).replace(/SSS/g,b).replace(/O/g,p)}function s(e,t,a,r){e["set"+(r?"":"UTC")+t](a)}e.exports=c,e.exports.asString=c,e.exports.parse=function(t,a,r){if(!t)throw new Error("pattern must be supplied");return function(t,a,r){var n=t.indexOf("O")<0,c=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(e,t){s(e,"FullYear",t,n)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(e,t){s(e,"Month",t-1,n)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(e,t){s(e,"Date",t,n)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(e,t){s(e,"Hours",t,n)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(e,t){s(e,"Minutes",t,n)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(e,t){s(e,"Seconds",t,n)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(e,t){s(e,"Milliseconds",t,n)}},{pattern:/O/,regexp:"[+-]\\d{3,4}|Z",fn:function(e,t){"Z"===t&&(t=0);var a=Math.abs(t),r=(t>0?-1:1)*(a%100+60*Math.floor(a/100));e.setUTCMinutes(e.getUTCMinutes()+r)}}],i=c.reduce((function(e,t){return t.pattern.test(e.regexp)?(t.index=e.regexp.match(t.pattern).index,e.regexp=e.regexp.replace(t.pattern,"("+t.regexp+")")):t.index=-1,e}),{regexp:t,index:[]}),d=c.filter((function(e){return e.index>-1}));d.sort((function(e,t){return e.index-t.index}));var l=new RegExp(i.regexp).exec(a);if(l){var u=r||e.exports.now();return d.forEach((function(e,t){e.fn(u,l[t+1])})),u}throw new Error("String '"+a+"' could not be parsed as '"+t+"'")}(t,a,r)},e.exports.now=function(){return new Date},e.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS",e.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO",e.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",e.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"},630:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(0),n=a.n(r),c=a(1),s=a(18),i=a(7),d=a(24);function l(e){var t=Object(i.useState)({}),a=Object(s.a)(t,2),r=a[0],l=a[1],u=null,o=function(){var t=Object(c.a)(n.a.mark((function t(){var a,r,c,s,i,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isConnected()){t.next=10;break}return t.next=3,Object(d.getUserInfoAll)(e.detail.account);case 3:a=t.sent,r=(+a.total).toFixed(2),c=a.valid?(+a.amount).toFixed(2):0,s=(+a.lp).toFixed(2),i=(+a.trade).toFixed(2),u=a.chainId,l({claimed:r,unclaimed:c,harvestDeriLp:s,harvestDeriTrade:i,chainId:u});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){return u=window.setInterval(o,18e4),o(),function(){return clearInterval(u)}}),[e.detail.account]),[r,u]}},631:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a(174),n=a(24);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chainInfo";return r[n.DeriEnv.get()][t][e]||{}}},648:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(1),s=a(18),i=a(7),d=a(95),l=a(627),u=a.n(l),o=a(24),j=a(630),b=a(622),p=a(621),x=a(41),f=a(631),h=a(56);t.a=Object(d.b)("wallet")(Object(d.c)((function(e){var t=e.wallet,a=void 0===t?{}:t,r=e.lang,d=Object(j.a)(a),l=Object(s.a)(d,2),O=l[0],v=l[1],m=Object(f.a)(O.chainId),g=Object(i.useState)("--"),w=Object(s.a)(g,2),N=w[0],y=w[1],S=Object(i.useState)("--"),k=Object(s.a)(S,2),M=k[0],_=k[1],T=Object(i.useState)("--"),I=Object(s.a)(T,2),E=I[0],F=I[1],R=Object(i.useState)("--"),D=Object(s.a)(R,2),A=D[0],C=D[1],Z=Object(i.useState)("--"),U=Object(s.a)(Z,2),H=U[0],B=U[1],J=Object(i.useState)(1),L=Object(s.a)(J,2),Y=L[0],z=L[1],P=Object(i.useState)(1),W=Object(s.a)(P,2),q=W[0],G=W[1],K=Object(i.useState)([]),Q=Object(s.a)(K,2),V=Q[0],X=Q[1],$=Object(i.useState)([]),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],re=function(){var e=Object(c.a)(n.a.mark((function e(){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/broker/".concat(a.detail.account,"/reward_list"),e.next=3,Object(o.fetchRestApi)(t);case 3:(r=e.sent).data&&(r.data.map((function(e){e.trader_invite_timestamp=1e3*e.trader_invite_timestamp,e.trader_address=e.trader_address.slice(0,6)+"..."+e.trader_address.slice(e.trader_address.length-4,e.trader_address.length)})),X(r.data));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/broker/top3_reward_list",e.next=3,Object(o.fetchRestApi)("/broker/top3_reward_list");case 3:(t=e.sent).data&&(t.data.length?t.data.map((function(e){1===e.rank?y(e.deri_reward):2===e.rank?_(e.deri_reward):3===e.rank&&F(e.deri_reward)})):(y(0),_(0),F(0)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(c.a)(n.a.mark((function e(){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/broker/".concat(a.detail.account,"/total_reward"),e.next=3,Object(o.fetchRestApi)(t);case 3:(r=e.sent).data&&(r.data.hasOwnProperty("deri_reward")?(C(r.data.deri_reward),B(r.data.rank)):(C(0),B(">999")));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==+O.unclaimed){e.next=3;break}return alert(r["no-deri-to-claim"]),e.abrupt("return");case 3:if(Object(x.b)(a.detail.chainId,O.chainId)){e.next=6;break}return alert("".concat(r["your-deri-is-on"]," ").concat(m.text,"  ").concat(r["connect-to"]," ").concat(m.text," ").concat(r["to-claim"],".")),e.abrupt("return");case 6:if(!(parseInt(Date.now()/1e3)%28800<1800)){e.next=10;break}return alert(r["claiming-DERI-is-disabled-during-first-30-minutes-of-each-epoch"]),e.abrupt("return");case 10:return e.next=12,Object(o.mintDToken)(a.detail.chainId,a.detail.account);case 12:if(!e.sent.success){e.next=18;break}return clearInterval(v),e.abrupt("return",!0);case 18:return alert(r["claim-failed"]),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(V.length){var e=V.length/10;e=Math.ceil(e);var t=V.slice(10*(q-1),10*q);z(e),ae(t)}}),[a.detail,V,q]),Object(i.useEffect)((function(){a&&a.detail&&a.detail.account&&(re(),ne(),ce())}),[a.detail]),Object(h.jsxs)("div",{className:"broker",children:[Object(h.jsxs)("div",{className:"title",children:[r["title-one"],Object(h.jsx)("br",{}),r["title-two"]]}),Object(h.jsxs)("div",{className:"rewards",children:[Object(h.jsxs)("div",{className:"reward-box",children:[Object(h.jsxs)("div",{className:"rewards-left",children:[Object(h.jsxs)("div",{className:"rewards-one",children:[Object(h.jsxs)("div",{className:"num",children:[Object(h.jsx)("span",{children:Object(h.jsx)(b.a,{value:N,displayType:"text",thousandSeparator:!0,decimalScale:"2"})})," DERI"]}),Object(h.jsxs)("div",{className:"one",children:["# 1 ",r.rewards]})]}),Object(h.jsxs)("div",{className:"rewards-three",children:[Object(h.jsxs)("div",{className:"num",children:[Object(h.jsx)("span",{children:Object(h.jsx)(b.a,{value:E,displayType:"text",thousandSeparator:!0,decimalScale:"2"})}),"  DERI"]}),Object(h.jsxs)("div",{className:"one",children:["# 3 ",r.rewards]})]})]}),Object(h.jsxs)("div",{className:"rewards-right",children:[Object(h.jsxs)("div",{className:"rewards-two",children:[Object(h.jsxs)("div",{className:"num",children:[Object(h.jsx)("span",{children:Object(h.jsx)(b.a,{value:M,displayType:"text",thousandSeparator:!0,decimalScale:"2"})})," DERI"]}),Object(h.jsxs)("div",{className:"one",children:["# 2 ",r.rewards]})]}),Object(h.jsxs)("div",{className:"rewards-frou",children:[Object(h.jsx)("div",{className:"num",children:Object(h.jsx)("span",{children:H})}),Object(h.jsx)("div",{className:"one",children:r["your-rewards"]})]})]})]}),Object(h.jsx)("div",{className:"bg-box"})]}),Object(h.jsxs)("div",{className:"process",children:[Object(h.jsx)("div",{className:"invite",children:r["invute-friends"]}),Object(h.jsx)("div",{className:"proce"}),Object(h.jsx)("div",{className:"bind",children:r["bind-address"]}),Object(h.jsx)("div",{className:"proce"}),Object(h.jsx)("div",{className:"earn",children:r["earn-deri"]})]}),Object(h.jsxs)("div",{className:"rules",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:Object(h.jsxs)("a",{children:[r["detailed-rules"]," >>"]})})]}),Object(h.jsxs)("div",{className:"my-harvest",children:[Object(h.jsx)("div",{className:"header",children:r["my-harvest"]}),Object(h.jsxs)("div",{className:"list",children:[Object(h.jsxs)("div",{className:"my-deri",children:[Object(h.jsxs)("div",{className:"claim-deri",children:[Object(h.jsxs)("div",{className:"claimed-deri",children:[Object(h.jsx)("div",{className:"claimed-title",children:r["claimed-deri"]}),Object(h.jsx)("div",{className:"unclaimed-title",children:r["unclaimed-deri"]})]}),Object(h.jsxs)("div",{className:"unclaimed-deri",children:[Object(h.jsx)("div",{className:"claimed-num",children:Object(h.jsx)(b.a,{value:(+A).toFixed(2),displayType:"text",thousandSeparator:!0,decimalScale:"2"})}),Object(h.jsx)("div",{className:"unclaimed-num",children:Object(h.jsx)(b.a,{value:(+O.unclaimed).toFixed(2),displayType:"text",thousandSeparator:!0,decimalScale:"2"})})]})]}),Object(h.jsx)("div",{className:"button",children:Object(h.jsx)(p.a,{className:"btn",btnText:r.claim,lang:r,click:se})})]}),Object(h.jsxs)("div",{className:"address-list",children:[Object(h.jsxs)("div",{className:"list-title",children:[Object(h.jsx)("div",{className:"time-invited",children:r["time-invited"]}),Object(h.jsx)("div",{className:"friends-add",children:r["friends-add"]}),Object(h.jsx)("div",{className:"contract-vol",children:r["contract-vol"]}),Object(h.jsx)("div",{className:"deri-minted",children:r["deri-minted"]})]}),te.map((function(e,t){return Object(h.jsxs)("div",{className:"list-box",children:[Object(h.jsx)("div",{className:"time",children:u.a.asString("yyyy-MM-dd hh:mm",new Date(parseInt(e.trader_invite_timestamp)))}),Object(h.jsx)("div",{className:"address",children:e.trader_address}),Object(h.jsx)("div",{className:"volume",children:e.trader_volume}),Object(h.jsx)("div",{className:"deri",children:Object(h.jsx)(b.a,{value:e.deri_reward,displayType:"text",thousandSeparator:!0,decimalScale:"2"})})]},t)}))]}),Object(h.jsxs)("div",{className:"page-of",children:[Object(h.jsx)("div",{onClick:function(){var e=q;1!=e&&(e-=1),G(e)},children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9.6",height:"8",viewBox:"0 0 9.6 8",children:Object(h.jsx)("path",{id:"\u8def\u5f84_3","data-name":"\u8def\u5f84 3",d:"M3186.224,481.353a.4.4,0,1,1,.552.58l-3.069,2.91h7.993a.4.4,0,1,1,0,.8h-7.98l3.056,2.91a.4.4,0,0,1-.552.58l-3.49-3.324a.8.8,0,0,1,.007-1.138Z",transform:"translate(-3182.5 -481.243)",fill:"#aaa"})})}),Object(h.jsxs)("div",{className:"page",children:[r.page," ",q," ",r.of," ",Y]}),Object(h.jsx)("div",{onClick:function(){var e=q;e<Y&&(e+=1),G(e)},children:Object(h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9.6",height:"8",viewBox:"0 0 9.6 8",children:Object(h.jsx)("path",{id:"\u8def\u5f84_4","data-name":"\u8def\u5f84 4",d:"M3268.376,481.353a.4.4,0,0,0-.552.58l3.069,2.91H3262.9a.4.4,0,0,0,0,.8h7.98l-3.056,2.91a.4.4,0,0,0,.552.58l3.49-3.324a.8.8,0,0,0-.007-1.138Z",transform:"translate(-3262.5 -481.243)",fill:"#aaa"})})})]})]})]})]})})))},720:function(e,t,a){},741:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return c}));var r=a(648),n=(a(720),a(56));function c(e){var t=e.lang;return Object(n.jsx)(r.a,{lang:t})}}}]);
//# sourceMappingURL=14.4bb54e4a.chunk.js.map