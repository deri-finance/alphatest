{"version":3,"sources":["pages/Token/img/pancake.svg","pages/Token/img/sushiswap-sushi-logo.svg","pages/Token/img/gateio.svg","pages/Token/img/mxc.svg","pages/Token/Token.js","utils/DeriNumberFormat.js"],"names":["inject","observer","wallet","lang","useState","deriTokenAddress","setDeriTokenAddress","deriInfo","setDeriInfo","config","useConfig","addToken","a","window","ethereum","request","method","params","type","options","address","symbol","decimals","console","log","getDeriInfo","fetch","resp","json","res","obj","price","data","market_cap","circulating_supply","parseInt","total_supply","sushiBuy","isConnected","switchNetwork","open","pancakeBuy","useEffect","detail","chainId","interval","setInterval","clearInterval","className","alt","src","deriLogo","rel","href","target","Button","onClick","PRIMARY","width","label","DeriNumberFormat","value","displayType","thousandSeparator","decimalScale","pancake","sushi","gate","mexc","Wrapper","styled","NumberFormat","props","LoadLine","div","test","height","renderablity","setRenderablity","firstTime","setFirstTime","isValidate","allowZero","undefined","isNaN","Math","abs","closeShowLoadingEffectAfterLoaded","defaultValue","others","bg","toFixed","countDecimal","toPlainString","fixedDecimalScale","timeout","setTimeout","clearTimeout","suffix"],"mappings":"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","file":"static/js/18.819a8a9f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/pancake.2c13a9f3.svg\";","export default __webpack_public_path__ + \"static/media/sushiswap-sushi-logo.f8ccc300.svg\";","export default __webpack_public_path__ + \"static/media/gateio.1570dd44.svg\";","export default __webpack_public_path__ + \"static/media/mxc.b59b5e73.svg\";","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport { useState, useEffect } from \"react\"\nimport { inject, observer } from 'mobx-react';\nimport DeriNumberFormat from \"../../utils/DeriNumberFormat\"\nimport Button from \"../../components/Button/Button\"\nimport useConfig from \"../../hooks/useConfig\"\nimport { PRIMARY } from '../../utils/Constants';\nimport deriLogo from \"../../assets/img/logo.svg\"\nimport pancake from \"./img/pancake.svg\"\nimport sushi from \"./img/sushiswap-sushi-logo.svg\"\nimport gate from \"./img/gateio.svg\"\nimport mexc from \"./img/mxc.svg\"\nimport './token.less'\nfunction Token({ wallet = {}, lang }) {\n  const [deriTokenAddress, setDeriTokenAddress] = useState()\n  const [deriInfo, setDeriInfo] = useState()\n  const config = useConfig();\n  const addToken = async () => {\n    if (deriTokenAddress) {\n      const tokenSymbol = 'DERI';\n      const tokenDecimals = 18;\n      try {\n        const wasAdded = await window.ethereum.request({\n          method: 'wallet_watchAsset',\n          params: {\n            type: 'ERC20', // Initially only supports ERC20, but eventually more!\n            options: {\n              address: deriTokenAddress, // The address that the token is at.\n              symbol: tokenSymbol, // A ticker symbol or shorthand, up to 5 chars.\n              decimals: tokenDecimals, // The number of decimals in the token\n            },\n          },\n        });\n\n        if (wasAdded) {\n          console.log('Thanks for your interest!');\n        } else {\n          console.log('Your loss!');\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n  const getDeriInfo = async () => {\n    let path = 'https://infoapi2.deri.finance/stats_for_token'\n    let resp = await fetch(path);\n    let res = await resp.json();\n    if (res) {\n      let obj = {}\n      obj.price = res.data.price\n      obj.market_cap = res.data.market_cap\n      obj.circulating_supply = parseInt(res.data.circulating_supply)\n      obj.total_supply = parseInt(res.data.total_supply)\n      setDeriInfo(obj)\n    }\n\n  }\n\n  const sushiBuy = async () => {\n    if (wallet.isConnected()) {\n      await wallet.switchNetwork(config[1])\n      window.open(\"https://app.sushi.com/swap?inputCurrency=&outputCurrency=0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9\")\n    } else {\n      window.open(\"https://app.sushi.com/swap?inputCurrency=&outputCurrency=0xA487bF43cF3b10dffc97A9A744cbB7036965d3b9\")\n    }\n  }\n\n  const pancakeBuy = async () => {\n    if (wallet.isConnected()) {\n      await wallet.switchNetwork(config[56])\n      window.open(\"https://exchange.pancakeswap.finance/#/swap?inputCurrency=0xe60eaf5a997dfae83739e035b005a33afdcc6df5\")\n    } else {\n      window.open(\"https://exchange.pancakeswap.finance/#/swap?inputCurrency=0xe60eaf5a997dfae83739e035b005a33afdcc6df5\")\n    }\n  }\n  useEffect(() => {\n    if (wallet.isConnected()) {\n      let address;\n      if (+wallet.detail.chainId === 56) {\n        address = '0xe60eaf5A997DFAe83739e035b005A33AfdCc6df5'\n      } else if (+wallet.detail.chainId === 1) {\n        address = '0xa487bf43cf3b10dffc97a9a744cbb7036965d3b9'\n      } else if (+wallet.detail.chainId === 128) {\n        address = '0x2bdA3e331Cf735D9420e41567ab843441980C4B8'\n      } else if (+wallet.detail.chainId === 137) {\n        address = '0x3d1d2afd191b165d140e3e8329e634665ffb0e5e'\n      }\n      setDeriTokenAddress(address)\n    }\n\n  }, [wallet.detail])\n  useEffect(() => {\n    let interval = null;\n    //计数器\n    interval = window.setInterval(() => {\n      getDeriInfo()\n    }, 300000);\n    getDeriInfo()\n    return () => {\n      interval && clearInterval(interval);\n    };\n  }, [])\n  return (\n    <div className='token-box'>\n      <div className='token-info'>\n        <div className='token-header'>\n          <div className='token-header-left'>\n            <div className='logo-title'>\n              <img alt='' src={deriLogo} />\n              <span className='title-text'>{lang['title']}</span>\n            </div>\n            <div className='token-header-des'>\n              {lang['deri-is-the-protocol-token']}\n              <a rel='noopener noreferrer' href='https://docs.deri.finance/tokenomics' target='_blank' className='learn-more'> {lang['learn-more']} </a>\n            </div>\n          </div>\n          <div className='token-header-right'>\n            <Button onClick={() => { addToken() }} type={PRIMARY} width=\"242\" label={lang[\"add-deri-to-metamask\"]} />\n          </div>\n        </div>\n        <div className='token-info-content'>\n          <div className='top-info-box'>\n            <div className='info-box'>\n              <div className='num'>\n                $ {deriInfo ? <DeriNumberFormat value={deriInfo.price} displayType='text' thousandSeparator={true} decimalScale={4} /> : '--'}\n              </div>\n              <div className='text'>\n                {lang['price']}\n              </div>\n            </div>\n            <div className='info-box min-box'>\n              <div className='num'>\n                $ {deriInfo ? <DeriNumberFormat value={deriInfo.market_cap} displayType='text' thousandSeparator={true} decimalScale={0} /> : '--'}\n              </div>\n              <div className='text'>\n                {lang['market-cap']}\n              </div>\n            </div>\n          </div>\n          <div className='buttom-info-box'>\n            <div className='info-box'>\n              <div className='num'>\n                {deriInfo ? <DeriNumberFormat value={deriInfo.circulating_supply} displayType='text' thousandSeparator={true} decimalScale={0} /> : '--'}\n              </div>\n              <div className='text'>\n                {lang['circulating-supply']}\n              </div>\n            </div>\n            <div className='info-box min-box'>\n              <div className='num'>\n                {deriInfo ? <DeriNumberFormat value={deriInfo.total_supply} displayType='text' thousandSeparator={true} decimalScale={0} /> : '--'}\n              </div>\n              <div className='text'>\n                {lang['total-supply']}\n              </div>\n            </div>\n          </div>\n\n        </div>\n        <div className='buy-deri-token'>\n          {lang[\"buy-deri-token\"]}\n        </div>\n        <div className='buy-deri-token-swap'>\n          <a target='_blank' onClick={pancakeBuy}>\n            <div className='swap-box'>\n              <div className='swap-logo'>\n                <img alt='' src={pancake} />\n              </div>\n              <div className='swap-name'>\n                {lang['pancake-swap']}\n              </div>\n            </div>\n          </a>\n          <a target='_blank' onClick={sushiBuy}>\n            <div className='swap-box'>\n              <div className='swap-logo'>\n                <img alt='' src={sushi} />\n              </div>\n              <div className='swap-name'>\n                {lang['sushi-swap']}\n              </div>\n            </div>\n          </a>\n          <a target='_blank' rel='noreferrer' href='https://www.gate.io/tradepro/DERI_USDT'>\n            <div className='swap-box'>\n              <div className='swap-logo'>\n                <img alt='' src={gate} />\n              </div>\n              <div className='swap-name'>\n                {lang['gate']}\n              </div>\n            </div>\n          </a>\n          <a target='_blank' rel='noreferrer' href='https://www.mexc.com/exchange/DERI_USDT'>\n            <div className='swap-box'>\n              <div className='swap-logo'>\n                <img alt='' src={mexc} />\n              </div>\n              <div className='swap-name'>\n                {lang['mexc']}\n              </div>\n            </div>\n          </a>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default inject('wallet')(observer(Token))    ","import React,{useState,useEffect,useRef} from 'react'\nimport ReactDOM from 'react-dom'\nimport NumberFormat from 'react-number-format'\nimport { inject, observer } from 'mobx-react';\nimport styled from 'styled-components';\nimport { toPlainString,countDecimal } from './utils';\nimport { bg } from '../lib/web3js';\nconst Wrapper = styled(NumberFormat)`\n  width : ${props => props.width}px;\n`\nconst LoadLine = styled.div`\n  width : ${props => /px$/.test(props.width) ? props.width : `${props.width}px`};\n  height : ${props => /px$/.test(props.height) ? props.height : `${props.height}px`};\n`\nfunction DeriNumberFormat(props){\n  const [renderablity, setRenderablity] = useState(<span className='loading-line'></span>);\n  const [firstTime, setFirstTime] = useState(true)\n  const isValidate = () => {\n    const {allowZero} = props \n    return (typeof props.value !== 'object' && props.value !== undefined && props.value !== ''  && !isNaN(props.value) && props.value !== 'NaN') \n          || ((Math.abs(props.value)) === 0 && allowZero === true )\n  }\n\n  useEffect(() => {\n    const {allowZero,wallet,closeShowLoadingEffectAfterLoaded,defaultValue = '--',...others} = props \n\n    if(isValidate()) {\n      //如果精度截取之后为0，则动态获取精度，取到不为0为止\n      if(!allowZero && others.value && /\\d+\\.0*[1-9]+/.test(others.value)  && (+bg(others.value).toFixed((+others.decimalScale || 2))) === 0){\n        others.decimalScale = countDecimal(Math.abs(others.value)) + 2\n      }\n      others.value = toPlainString(others.value)\n      if(others.value && /\\d+.9{6}/.test(others.value)){\n        others.value = (+others.value).toFixed(5)\n      }\n      setRenderablity(<Wrapper {...others}  displayType = 'text'  fixedDecimalScale={true} thousandSeparator={true}/>)\n    } else if(firstTime){\n      const {width,height} = props\n      setRenderablity(<LoadLine className='loading-line' width={width} height={height}></LoadLine>)\n      if(closeShowLoadingEffectAfterLoaded){\n        setFirstTime(false)\n      }\n    } \n    const timeout = window.setTimeout(() => {\n      // && wallet && (!wallet.isConnected() || !wallet.supportChain)\n      if(!isValidate()){\n        setRenderablity(defaultValue)\n      }\n    },60000)\n    return () => {\n      clearTimeout(timeout)\n    };\n  }, [props.value,props.decimalScale,props.suffix]);\n\n  return renderablity;\n}\nexport default DeriNumberFormat\n// export default inject('wallet')(observer(DeriNumberFormat))"],"sourceRoot":""}