(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[1],{610:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));var a=c(0),n=c.n(a),i=c(4),s=c(34),l=c(3),r=c(17);function o(e){var t=e.btnText,c=e.className,a=e.disabled,o=e.click,j=e.afterClick,d=e.checkApprove,b=e.wallet,u=e.spec,A=e.lang,m=Object(l.useState)(a?"disabled":"enabled"),O=Object(s.a)(m,2),x=O[0],p=O[1],f=Object(l.useState)(!0),g=Object(s.a)(f,2),h=g[0],v=g[1],N=Object(l.useState)(!1),w=Object(s.a)(N,2),y=w[0],k=w[1],D=Object(l.useState)(t),C=Object(s.a)(D,2),S=C[0],I=C[1],B=Object(l.useRef)(null),M=function(){var e=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===x){e.next=2;break}return e.abrupt("return");case 2:return Q(),e.next=5,o();case 5:e.sent&&j&&j(),E();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){p("disabled"),k(!0),B.current&&(B.current.style.display="inline-block")},E=function(){B.current&&(B.current.style.display="none"),p("enabled"),k(!1)},F=function(){var e=Object(i.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d&&b&&b.detail.account)){e.next=5;break}return e.next=3,b.isApproved(u.pool,u.bTokenId);case 3:t=e.sent,v(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(),e.next=3,b.approve(u.pool,u.bTokenId);case 3:e.sent.success?v(!0):(v(!1),alert(A["approve-failed"])),E();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){return F(),function(){}}),[b,u,d]),Object(l.useEffect)((function(){return t&&I(t),function(){}}),[t]),Object(r.jsxs)("button",{className:c,onClick:function(){h?M():T()},children:[Object(r.jsx)("span",{className:"btn-loading-wrap",children:Object(r.jsx)("span",{ref:B,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),y?A.pending:h?S:A.approve]})}},611:function(e,t,c){"use strict";c.d(t,"a",(function(){return s}));var a=c(3),n=c(612),i=c(17);function s(e){const[t,c]=Object(a.useState)("--");return Object(a.useEffect)((()=>{const{allowZero:t,...a}=e;return("object"!==typeof e.value&&void 0!==e.value&&""!==e.value&&"NaN"!==e.value||0===(isNaN(e.value)&&Math.abs(e.value))&&!0===t)&&c(Object(i.jsx)(n.a,{...a,displayType:"text"})),()=>{}}),[e.value]),t}},617:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var a=c(3);function n(e){return Object(a.useEffect)((function(){return document.querySelector("body").style.overflow="hidden",function(){e||(document.querySelector("body").style.overflow="auto")}}),[]),null}},618:function(e,t,c){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABBdSURBVHic7d0tj2xZFcfhBeFFkAwCLA6HJEGgwYHEkyBwgwJHwGEQjOILoPgKIAmCQDAEEiZoSHAkCEAMom/PdPet6qrzuvda63mS9mfudFf/797nNxMxn+9ExI8j4tODnwMAONG7EfFBRLwfEd8a/CwAwEkeB8Dj168i4ktDnwgAivn46Ae4w9ci4o8R8V5EvDP4WQCAg7w8AXj69c+I+F7kGC4AwAKvDYDHr99HxFdHPSAAZJf1b9JfjojfRMQvI+ILg58FANLJOgAiIj4WD5XAX0I2CADp3XMFcOlLNggAd8p8AvDSF+PhSkA2CAA3VBoAj2SDAJDQ2isA2SAAJLbnAJANAsAFXf5mLBsEgCe6DIAI2SAATO2IKwDZIAA80ekE4CXZIABtdR4Aj2SDALRjADz4ZDxcPfwtZIMANOAX3XOfj4ifRcTvQjYIQGEGwGWyQQBKMwCukw0CUJYBcNtnIuJHEfGnkA0CUIQBcD/ZIABlGADLyQYBSM8AWEc2CEBqfnFtIxsEICUDYB+yQQBSMQD2IxsEIA0DYH+yQQCmZwAcRzYIwLQMgOM9zQY/O/hZACAiDICzyAYBmIpfROf6XMgGAZiAATCGbBCAoQyAcWSDAAxjAIwnGwTgdAbAPGSDAJzGAJiPbBCAwxkAc5INAnAov1jmJhsE4BAGQA6yQQB2ZQDkIRsEYDcGQD6yQQA2MwDykg0CsJoBkJ9sEIDFDIAaZIMALOIXRS2yQQDuYgDUJBsE4FUGQF2yQQCuMgDqkw0C8BYDoA/ZIAAfMgD6kQ0CYAA0JRsEaM4Hf2+yQYCmDAAiZIMA7RgAPJINAjRiAPCSbBCgAQOAa2SDAIUZANwiGwQoyADgHrJBgGJ8kLOEbBCgCAOANWSDAMkZAKwlGwRIzABgK9kgQEIGAHuRDQIkYgCwN9kgQAIGAEeQDQJMzgczR5INAkzKAOAMskGAyRgAnEU2CDARA4CzyQYBJmAAMIpsEGAgA4DRZIMAAxgAzEA2CHAyH7TMRDYIcBIDgBnJBgEOZgAwK9kgwIEMAGYnGwQ4gAFAFrJBgB0ZAGQjGwTYgQFARrJBgI18cJKZbBBgJQOACmSDAAsZAFQhGwRYwACgGtkgwB0MAKqSDQK8wgCgOtkgwAUGAB3IBgFe8EFIJ7JBgDcMADqSDQLtGQB0JRsEWjMA6E42CLRkAMAD2SDQigEAz8kGgRYMAHibbBAozwcbXCcbBMoyAOA22SBQjgEA95ENAqUYALCMbBAowQCAdWSDQGoGAGwjGwRSMgBgO9kgkI4PKtiPbBBIwwCA/ckGgekZAHAM2SAwNQMAjiUbBKZkAMA5ZIPAVAwAOJdsEJiCAQDnkw0Cw/nggXFkg8AwBgCMJxsETmcAwBxkg8CpDACYi2wQOIUBAHOSDQKHMgBgbrJB4BAGAMxPNgjszgcJ5CEbBHZjAEA+skFgMwMAcpINApsYAJCbbBBYxQCAGmSDwCIGANQiGwTuYgBAPbJB4CYfDFCXbBC4ygCA+mSDwFsMAOhBNgg8YwBAL7JBICIMAOhKNgjNGQDQm2wQmjIAANkgNOQHHXgkG4RGDADgJdkgNGAAAJfIBqE4AwB4jWwQijIAgHvIBqEYAwBYQjYIRRgAwFKyQSjADy6wlmwQEjMAgK1kg5CQAQDsQTYIyRgAwJ5kg5CEAQAcQTYIkzMAgCPJBmFSBgBwNNkgTMgPInAW2SBMxAAAziYbhAkYAMAIskEYzAAARpINwiAGADAD2SCczAAAZiIbhJMYAMBsZINwAj9YwKxkg3AgAwCYnWwQDmAAABnIBmFnBgCQiWwQdmIAABnJBmEjAwDITDYIKxkAQHayQVjBDwpQhWwQFjAAgGpkg3AHAwCoSDYINxgAQGWyQbjCAAA6kA3CCwYA0IlsEN4wAIBuZIMQvvGBvmSDtGYAAN3JBmnJAACQDdKQAQDwEdkgbRgAAG+TDVKeAQBwnWyQsgwAgNfJBinJNzLAfWSDlGIAACwjG6QEAwBgOdkg6RkAAOvJBknLAADYTjZIOgYAwH5kg6RhAADsSzZICr4xAY4hG2RqBgDAsWSDTMkAADiebJDpGAAA55ENMg0DAOB8skGGMwAAxpENMowBADCWbJAhfKMBzEE2yKkMAIC5yAY5hQEAMB/ZIIczAADmJRvkMAYAwPxkg+zOAADIQzbIbgwAgFxkg+zCNw5ATrJBNjEAAHKTDbKKAQCQn2yQxQwAgDpkg9zNAACoRzbITQYAQF2yQa4yAABqkw1ykW8EgB5kgzxjAAD0IhskIgwAgI5kgxgAAI3JBhszAACQDTZkAADwSDbYiAEAwFOywSb8iwXgEtlgcQYAAK+RDRZlAABwi2ywIAMAgHvJBgsxAABYSjZYgAEAwFqywcQMAAC2kA0m5V8UAHuQDSZjAACwJ9lgEgYAAHuTDSZgAABwFNngxAwAAI4mG5yQAQDAWWSDEzEAADiTbHAS/uABGEE2OJgBAMBIssFBDAAARpMNDmAAADAL2eCJDAAAZiMbPIEBAMCsZIMHMgAAmJls8CD+IAHIQDa4MwMAgExkgzsxAADIRja4AwMAgKxkgxsYAABkJxtcwQAAoArZ4AIGAACVyAbv5A8GgIpkgzcYAABUJhu8wgAAoDrZ4AUGAABdyAafMAAA6EY2GAYAAH21zgYNAAA6a5sNtvkHBYBXtMsGDQAA+EibbNAAAIDnWmSDBgAAXFY6GzQAAOB1JbNBAwAA7lMqGzQAAOB+ZbLBtA8OAAOlzwYNAABYL202aAAAwDYps0EDAAD2kSobNAAAYF8pskEDAACOMXU2aAAAwPE+GP0AL31i9AMAQFG/jof/VsCfRz/IJU4AAGBf70fENyPi6zHpL/8IJwAAsJd/R8RPI+InEfGfwc9ykwEAANt8EBG/iIgfRMQ/Bj/L3QwAAFjvD/Hw/wb47egHWco7AACw3D8i4rsR8ZVI+Ms/wgkAACzxv4j4eUT8MCL+NfhZNjEAAOA+U2d9S7kCAIDXpcj6lnICAACXpcr6ljIAAOC5lFnfUgYAAHwkbda3lHcAAKBA1reUEwAAOiuT9S1lAADQVamsbylXAAB0UzLrW8oJAABdlM76ljIAAKiuRda3lAEAQGVtsr6lvAMAQEXtsr6lnAAAUEnbrG8pAwCAKlpnfUu5AgAgO1nfCk4AAMhK1reBAQBANrK+HRgAAGQi69uJdwAAyEDWtzMnAADMTNZ3EAMAgFnJ+g7kCgCA2cj6TuAEAIBZyPpOZAAAMJqsbwADAICRZH2DeAcAgBFkfYM5AQDgTLK+SRgAAJxF1jcRVwAAHE3WNyEnAAAcRdY3MQMAgL3J+hIwAADYk6wvCe8AALAHWV8yTgAA2ELWl5QBAMBasr7EXAEAsJSsrwAnAADcS9ZXiAEAwC2yvoIMAABeI+sryjsAAFwi6yvOCQAAT8n6mjAAAHgk62vEFQAAsr6GnAAA9CXra8wAAOhH1ocBANCMrI+I8A4AQBeyPp5xAgBQm6yPiwwAgLpkfVzlCgCgHlkfNzkBAKhD1sfdDACA/GR9LGYAAOQm62MV7wAA5CTrYxMnAAC5yPrYhQEAkIesj924AgCYn6yP3TkBAJiXrI/DGAAA85H1cTgDAGAusj5O4R0AgDnI+jiVEwCAsWR9DGEAAIwj62MYVwAA55P1MZwTAIDzyPqYhgEAcDxZH9MxAACOJetjSt4BADiGrI+pOQEA2JesjxQMAID9yPpIwxUAwHayPtJxAgCwnqyPtAwAgOVkfaRnAAAsI+ujBO8AANxH1kcpTgAAXifroyQDAOA6WR9luQIAeJusj/KcAAB8RNZHGwYAgKyPhgwAoDtZHy15BwDoStZHa04AgG5kfRAGANCLrA/ecAUAdCDrgxecAACVyfrgCgMAqEjWBzcYAEA1sj64g3cAgCpkfbCAEwAgO1kfrGAAAJnJ+mAlVwBARrI+2MgJAJCJrA92YgAAGcj6YGcGADA7WR8cwDsAwKxkfXAgJwDAbGR9cAIDAJiJrA9O4goAmIGsD07mBAAYSdYHgxgAwAiyPhjMAADOJuuDCXgHADiLrA8m4gQAOJqsDyZkAABHkvXBpFwBAEeQ9cHknAAAe5L1QRIGALAHWR8kYwAAW8n6ICHvAABryfogMScAwFKyPijAAACWkPVBEa4AgHvI+qAYJwDAa2R9UJQBAFwi64PiDADgJVkfNOAdAOCRrA8acQIAyPqgIQMAepP1QVOuAKAnWR805wQAepH1ARFhAEAXsj7gGQMA6pP1AW/xDgDUJesDrnICAPXI+oCbDACoRdYH3MUVANQg6wMWcQIAucn6gFUMAMhJ1gdsYgBAPrI+YDPvAEAesj5gN04AYH6yPmB3BgDMTdYHHMIVAMxJ1gccygkAzEXWB5zCAIA5yPqAUxkAMJ6sDziddwBgHFkfMIwTADifrA8YzgCAc8n6gCm4AoBzyPqAqTgBgGPJ+oApGQBwDFkfMDUDAPYn6wOm5x0A2I+sD0jDCQBsJ+sD0jEAYBtZH5CSKwBYR9YHpOYEAJaR9QElGABwH1kfUIoBALfJ+oByvAMA18n6gLKcAMDbZH1AeQYAPCfrA1pwBQAPZH1AK04A6E7WB7RkANCVrA9ozQCgI1kf0J53AOhE1gfwhhMAOpD1AbxgAFCdrA/gAlcAVCXrA3iFEwCqkfUB3MEAoApZH8ACBgAVyPoAFvIOAJnJ+gBWcgJARrI+gI0MALKR9QHswBUAWcj6AHbkBIDZyfoADmAAMCtZH8CBDABmJOsDOJh3AJiJrA/gJE4AmIGsD+BkBgCjyfoABnAFwCiyPoCBnABwNlkfwAQMAM4i6wOYiAHAGWR9AJPxDgBHkvUBTMoJAEeQ9QFMzgBgb7I+gARcAbAXWR9AIk4A2ErWB5CQAcBasj6AxAwA1pD1ASTnHQCWkPUBFOEEgHvI+gCKMQC4RdYHUJArAK6R9QEU5gSAl2R9AA0YADyS9QE0YgAQIesDaMc7AL3J+gCacgLQk6wPoDkDoB9ZHwCuABqR9QHwIScA9cn6AHiLAVCXrA+AqwyAmmR9ALzKOwC1yPoAuIsTgBpkfQAsYgDkJ+sDYDFXAHnJ+gBYzQlAPrI+ADYzAPKQ9QGwGwMgB1kfALvyDsDcZH0AHMIJwJxkfQAcygCYj6wPgMO5ApiHrA+A0zgBGE/WB8DpDIBxZH0ADGMAjCHrA2Ao7wCcS9YHwBScAJxD1gfAVAyA48n6AJiOK4DjyPoAmJYTgP3J+gCYngGwH1kfAGkYAPuQ9QGQincAtvl7yPoASMgJwDqyPgBSMwCWk/UBkJ4rgPvJ+gAowwnAbbI+AMoxAK6T9QFQlgFwmawPgNK8A/CcrA+AFpwAPJD1AdCKASDrA6ChzlcAsj4A2up4AiDrA6C9TgNA1gcAb3QZALI+AHii+jsAsj4AuKDqCYCsDwBeUXEAyPoA4IZKVwCyPgC4U4UTAFkfACyUeQDI+gBgpawDQNYHABtkewdA1gcARb0bD8f7T7/+GxHvRcQ7A58LAMrIcAUg6wOABh5PAP4aEd8Y/CwAwEm+HRHfj4hPDX4OACjr/+F/mKZgNNwOAAAAAElFTkSuQmCC"},619:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));var a=c(3),n=c(15),i=c(612),s=c(610),l=c(617),r=c(17);function o({wallet:e,spec:t={},onClose:c,balance:o,afterDeposit:j,nested:d,lang:b}){const[u,A]=Object(a.useState)(""),[m,O]=Object(a.useState)(""),[x,p]=Object(a.useState)(""),[f,g]=Object(a.useState)(!1);Object(l.a)(d);return Object(a.useEffect)((()=>((()=>{if(o){const e=(+o).toFixed(2),t=e.indexOf(".")>0?e.substring(e.indexOf(".")+1,e.length):"0";A(o),O(t)}})(),()=>{})),[o]),Object(r.jsx)("div",{className:"modal fade",children:Object(r.jsx)("div",{className:"modal-dialog",children:Object(r.jsxs)("div",{className:"modal-content",children:[Object(r.jsxs)("div",{className:"modal-header",children:[Object(r.jsx)("div",{className:"title",children:b["deposit-margin"]}),Object(r.jsx)("div",{className:"close","data-dismiss":"modal",onClick:()=>{f||c()},children:Object(r.jsx)("span",{children:"\xd7"})})]}),Object(r.jsx)("div",{className:"modal-body",children:Object(r.jsxs)("div",{className:"margin-box-info",children:[Object(r.jsx)("div",{children:b["wallet-balance"]}),Object(r.jsxs)("div",{className:"money",children:[Object(r.jsxs)("span",{children:[Object(r.jsxs)("span",{className:"bt-balance",children:[Object(r.jsx)(i.a,{value:u,displayType:"text",decimalScale:0}),".",Object(r.jsx)("span",{style:{fontSize:"12px"},children:m})]}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{style:{fontSize:"14px",marginLeft:"10px",marginTop:"10px"},children:t.bTokenSymbol})]}),Object(r.jsx)("span",{className:"add"})]}),Object(r.jsxs)("div",{className:"enter-margin",children:[Object(r.jsx)("div",{className:"input-margin",children:Object(r.jsxs)("div",{className:"box",children:[Object(r.jsx)("div",{className:"amount",style:{display:""!==x?"block":"none"},children:b.amount}),Object(r.jsx)("input",{type:"number",className:"margin-value",placeholder:b.amount,value:x,onChange:e=>{const{value:t}=e.target;p(t)}})]})}),Object(r.jsx)("div",{children:t.bTokenSymbol})]}),Object(r.jsxs)("div",{className:"max",children:[b["max-add"],": ",Object(r.jsx)("span",{className:"max-num",children:o}),Object(r.jsx)("span",{className:"max-btn-left",onClick:()=>{p(o)},children:b["add-all"]})]}),Object(r.jsx)("div",{className:"add-margin-btn",children:Object(r.jsx)(s.a,{className:"margin-btn",btnText:b.deposit,checkApprove:!0,wallet:e,spec:t,lang:b,click:()=>(async a=>{const i=Object(n.e)(o);if(Object(n.e)(a).gt(i))return void alert(b["insufficient-balance-in-wallet"]);if(+a<=0||isNaN(a))return void alert(b["it-has-to-be-greater-than-zero-tip"]);g(!0),(await Object(n.h)(e.detail.chainId,t.pool,e.detail.account,a,t.bTokenId)).success?(j(),c()):alert(b["deposit-failed"]),g(!1)})(x)})})]})})]})})})}},623:function(e,t,c){"use strict";c.d(t,"a",(function(){return j}));var a=c(3),n=c(15),i=c(610),s=c(611),l=c(31),r=c(617),o=c(17);function j({wallet:e,spec:t={},position:c,onClose:j,afterWithdraw:d,availableBalance:b,nested:u,lang:A}){const[m,O]=Object(a.useState)(""),[x,p]=Object(a.useState)(""),[f,g]=Object(a.useState)(""),[h,v]=Object(a.useState)(!1);Object(r.a)(u);return Object(a.useEffect)((()=>((async()=>{if(e.isConnected()&&b){const e=b;O(e);const t=e.indexOf(".");p(t>0?e.substring(t+1,t+3):"00")}})(),()=>{})),[e.detail.account,c.margin,c.unrealizedPnl]),Object(o.jsx)("div",{className:"modal fade",id:"removeMargin",children:Object(o.jsx)("div",{className:"modal-dialog",children:Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-header",children:[Object(o.jsx)("div",{className:"title",children:A["withdraw-margin"]}),Object(o.jsx)("div",{className:"close",onClick:()=>{h||j()},children:Object(o.jsx)("span",{children:"\xd7"})})]}),Object(o.jsx)("div",{className:"modal-body",children:Object(o.jsxs)("div",{className:"margin-box-info",children:[Object(o.jsx)("div",{children:A["available-balance"]}),Object(o.jsxs)("div",{className:"money",children:[Object(o.jsx)("span",{children:Object(o.jsxs)("span",{className:"bt-balance",children:[Object(o.jsx)(s.a,{value:m,thousandSeparator:!0,decimalScale:0}),".",Object(o.jsx)("span",{style:{fontSize:"12px"},children:x})]})}),Object(o.jsx)("span",{className:"remove"})]}),Object(o.jsxs)("div",{className:"enter-margin remv",children:[Object(o.jsx)("div",{className:"input-margin",children:Object(o.jsxs)("div",{className:"box",children:[Object(o.jsx)("div",{className:"amount",style:{display:""!==f?"block":"none"},children:A.amount}),Object(o.jsx)("input",{type:"number",className:"margin-value",value:f,onChange:e=>{const{value:t}=e.target;g(t)},placeholder:A.amount})]})}),Object(o.jsx)("div",{children:t.baseToken})]}),0===+c.marginHeld&&Object(o.jsxs)("div",{className:"max",children:[A.max,": ",Object(o.jsx)("span",{className:"max-num",children:m||c.margin}),Object(o.jsx)("span",{className:"max-btn-left",onClick:()=>{g(b)},children:A["remove-all"]})]}),+c.volume>0&&Object(o.jsxs)("div",{className:"max",children:[Object(o.jsx)("span",{className:"max-num"}),Object(o.jsx)("span",{className:"max-btn-left",children:" "})]}),Object(o.jsx)("div",{className:"add-margin-btn",children:Object(o.jsx)(i.a,{className:"margin-btn",btnText:A.withdraw,lang:A,click:async()=>{const c=Object(l.b)(m);if(Object(l.b)(f).gt(c))return void alert(A["under-margin"]);if(+f<=0||isNaN(f))return void alert(A["it-has-to-be-greater-than-zero-tip"]);v(!0);const a=c.eq(f),i=await Object(n.cb)(e.detail.chainId,t.pool,e.detail.account,f,t.bTokenId,a);if(i.success)d(),j();else{const e="string"===typeof i.error?i.error:i.error.errorMessage||i.error.message;alert(e)}v(!1)},checkApprove:!0,wallet:e,spec:t})})]})})]})})})}},624:function(e,t,c){"use strict";c.d(t,"a",(function(){return g}));var a=c(91),n=c(0),i=c.n(n),s=c(4),l=c(34),r=c(3),o=c(152),j=c(619),d=c(623),b=c(625),u=c(626),A=c(611),m=c(15),O=c(617),x=c(17),p=Object(o.a)(j.a),f=Object(o.a)(d.a);function g(e){var t=e.wallet,c=e.spec,n=e.afterDepositAndWithdraw,o=e.position,j=e.onClose,d=e.lang,g=Object(r.useState)([]),h=Object(l.a)(g,2),v=h[0],N=h[1],w=parseInt((document.body.offsetHeight-140)/54),y=Object(r.useState)(Array.from({length:w})),k=Object(l.a)(y,2),D=k[0],C=k[1],S=Object(r.useState)(!1),I=Object(l.a)(S,2),B=I[0],M=I[1],Q=Object(r.useState)(!1),E=Object(l.a)(Q,2),F=E[0],T=E[1],P=Object(r.useState)(""),R=Object(l.a)(P,2),Y=R[0],J=R[1],H=Object(r.useState)(""),G=Object(l.a)(H,2),L=G[0],z=G[1],Z=Object(r.useState)(""),U=Object(l.a)(Z,2),q=U[0],V=U[1],W=Object(r.useState)(""),K=Object(l.a)(W,2),X=K[0],$=K[1];Object(O.a)();var _=function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.detail.account||!c){e.next=6;break}return e.next=3,Object(m.y)(t.detail.chainId,c.pool,t.detail.account,c.symbolId);case 3:a=e.sent,N(a),a.length<w&&C(Array.from({length:w-a.length}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return _(),window.scrollTo(0,0),function(){}}),[t.detail.account,c]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"modal fade",children:Object(x.jsx)("div",{className:"modal-dialog",children:Object(x.jsxs)("div",{className:"modal-content",children:[Object(x.jsxs)("div",{className:"modal-header",children:[Object(x.jsx)("div",{className:"title",children:d["balance-in-contract-uppercase"]}),Object(x.jsx)("div",{className:"close","data-dismiss":"modal",onClick:function(){n(),j()},children:Object(x.jsx)("span",{children:"\xd7"})})]}),Object(x.jsx)("div",{className:"modal-body",children:Object(x.jsxs)("div",{className:"balance-list",children:[Object(x.jsxs)("div",{className:"row header",children:[Object(x.jsx)("span",{className:"btoken pc",children:d["base-token"]}),Object(x.jsx)("span",{className:"btoken mobile",children:d["base-token"]}),Object(x.jsx)("span",{className:"w-balance pc",children:d["wallet-balance"]}),Object(x.jsx)("span",{className:"w-balance mobile",children:d["wallet-balance"]}),Object(x.jsx)("span",{className:"avail-balance pc",children:d["available-balance"]}),Object(x.jsx)("span",{className:"avail-balance mobile",children:d["available-balance"]})]}),v.map((function(e,t){return Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("span",{className:"btoken",children:e.bTokenSymbol}),Object(x.jsx)("span",{className:"w-balance",children:Object(x.jsx)(A.a,{value:e.walletBalance,fixedDecimalScale:!0,decimalScale:2})}),Object(x.jsx)("span",{className:"avail-balance",children:Object(x.jsx)(A.a,{value:e.availableBalance,fixedDecimalScale:!0,decimalScale:2})}),Object(x.jsxs)("span",{className:"action",children:[Object(x.jsxs)("span",{className:"add-margin",id:"openAddMargin",onClick:function(){return function(e,t,c){J(e),V(t),$(c),M(!0)}(e.walletBalance,e.bTokenId,e.bTokenSymbol)},children:[Object(x.jsx)("img",{src:b.a,alt:d["add-margin"]})," ",d.add]}),Object(x.jsxs)("span",{className:"remove-margin",onClick:function(){return function(e,t,c){z(e),V(t),$(c),T(!0)}(e.availableBalance,e.bTokenId,e.bTokenSymbol)},children:[Object(x.jsx)("img",{src:u.a,alt:d["remove-margin"]})," ",d.remove]})]})]},t)})),D.map((function(e,t){return Object(x.jsx)("div",{className:"row"},t)}))]})})]})})}),Object(x.jsx)(p,{wallet:t,onClose:function(){return M(!1)},balance:Y,spec:Object(a.a)(Object(a.a)({},c),{},{bTokenId:q,bTokenSymbol:X}),position:o,modalIsOpen:B,afterDeposit:function(){M(!1),_()},className:"trading-dialog",nested:!0,lang:d}),Object(x.jsx)(f,{wallet:t,onClose:function(){return T(!1)},spec:Object(a.a)(Object(a.a)({},c),{},{bTokenId:q,bTokenSymbol:X}),position:o,modalIsOpen:F,afterWithdraw:function(){T(!1),_()},availableBalance:L,className:"trading-dialog",nested:!0,lang:d})]})}},625:function(e,t,c){"use strict";t.a=c.p+"static/media/remove-margin.1ccb58c4.svg"},626:function(e,t,c){"use strict";t.a=c.p+"static/media/add-margin.8b496dd1.svg"},629:function(e,t,c){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAASCAYAAAC5DOVpAAAACXBIWXMAAAsSAAALEgHS3X78AAAArUlEQVQ4ja2UUQ0CMQxAHwQBOEACSDgJOMDCOWAoOAuggElAAjg5FJQ0lMuyDHIbfUmzj3Zv3ZoMEfkWQd4Ey/cisvtRz5L5rIFoa5EambIBbl4yZQucvWTKAei9ZMoA7P+VnYCFRUwTq6xQT7o29WmdBUBsjXZyDdP+0jU1eWntrIRO6uElG4EOeHrIUuE4V5ZPM+dugb1laO2sGldZes2jRTv2sX0+wlaCiPACF2WaE4qSlAwAAAAASUVORK5CYII="},630:function(e,t,c){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQ4jaVV223DMAy8BvmvRvAG8QgeISN4lIyQDeoRMoK7gUfQBnUnYMH0LmAU2YETAoQhPs4niWd/mBkWLAE4AmiK9ATgstS0q8QcaADwA6Cv5E4AZj4fzRkG78xsNrOLmTVFrqyb6CnmYlFr/9avAJU+mFmOoCpIZLYFTO6gYwk4cJtbwUQmi4wC9uTMnnnP84QW4xtg8iupHedsrIxNCrG+GKGWsxhrvh1rT8AcwBz8wKaOw/3F/MzB9ppPPttysHNYq0GK0PqXnhnLoebO9oFZ3N7IbaupKwA61p2Lo7peylE39IZrUpJAZsrpVdCT5jgGXmXZREIxMVExW1Xifefax0ESGsovyAozB7uTbO2NrpqbNhdY+RH5Nm/MlgDl0qabv0CumLOqXuLaL8DNVVT7BfhwPxqAP4UiW3Wp1wTfAAAAAElFTkSuQmCC"},631:function(e,t,c){"use strict";var a=c(3),n=(c(687),c(609)),i=c.n(n),s=c(46),l=c(17);t.a=Object(s.b)("version","wallet","type")(Object(s.c)((function({lang:e,version:t,wallet:c,type:n}){const[s,r]=Object(a.useState)("main"),o=i()("area-picker-wrapper",s),j=e=>{r(e),"innovation"===e?t.setCurrent("v2_lite"):t.setCurrent("v2")};return Object(a.useEffect)((()=>(j("main"),()=>{})),[]),(t.isV2||t.isV2Lite)&&c.supportInnovation&&!n.isOption?Object(l.jsx)("div",{className:"area-picker",children:Object(l.jsxs)("div",{className:o,children:[Object(l.jsx)("span",{className:"left",onClick:()=>j("main"),children:e["main-zone"]}),Object(l.jsx)("span",{className:"right",onClick:()=>j("innovation"),children:e["innovation-zone"]})]})}):null})))},641:function(e,t,c){"use strict";var a=c(3),n=c(153),i=c(0),s=c.n(i),l=c(4),r=c(34),o=c(15),j=c(609),d=c.n(j),b=c(152),u=c(619),A=c(623),m=c(611),O=c(31),x=c(46),p=c(624),f=c(626),g=c(625),h=c(629),v=c(630),N=c.p+"static/media/close-position-icon.6e2b1ee2.svg",w=c(17),y=Object(b.a)(u.a),k=Object(b.a)(A.a),D=Object(b.a)(p.a);function C(e){var t=e.trading,c=e.wallet,n=e.lang,i=Object(a.useState)(Object(w.jsx)("span",{})),s=Object(r.a)(i,2),l=s[0],o=s[1];return Object(a.useEffect)((function(){var e;c.isConnected()&&t.position.liquidationPrice&&(t.position.liquidationPrice.numPositions>1?t.position.liquidationPrice.price1&&t.position.liquidationPrice.price2?e=Object(w.jsxs)("span",{children:[Object(w.jsx)(m.a,{decimalScale:2,value:t.position.liquidationPrice.price1}),Object(w.jsx)("span",{children:" / "}),Object(w.jsx)(m.a,{decimalScale:2,value:t.position.liquidationPrice.price2})]}):t.position.liquidationPrice.price1||t.position.liquidationPrice.price2?!t.position.liquidationPrice.price1&&t.position.liquidationPrice.price2?e=Object(w.jsxs)("span",{children:[Object(w.jsx)("span",{className:"funding-fee",title:n["liq-price-hover"],children:" ? "}),Object(w.jsx)("span",{children:" / "}),Object(w.jsxs)("span",{children:[" ",Object(w.jsx)(m.a,{decimalScale:2,value:t.position.liquidationPrice.price2})," "]})]}):t.position.liquidationPrice.price1&&!t.position.liquidationPrice.price2&&(e=Object(w.jsxs)("span",{children:[Object(w.jsxs)("span",{children:[" ",Object(w.jsx)(m.a,{decimalScale:2,value:t.position.liquidationPrice.price1})," "]}),Object(w.jsx)("span",{children:" / "}),Object(w.jsx)("span",{className:"funding-fee",title:n["liq-price-hover"],children:" ? "})]})):e=Object(w.jsxs)("span",{children:[Object(w.jsx)("span",{className:"funding-fee",title:n["liq-price-hover"],children:" ? "}),Object(w.jsx)("span",{children:" / "}),Object(w.jsx)("span",{className:"funding-fee",title:n["liq-price-hover"],children:" ? "})]}):t.position.liquidationPrice.price1&&t.position.liquidationPrice.price2?e=Object(w.jsxs)("span",{children:[Object(w.jsx)(m.a,{decimalScale:2,value:t.position.liquidationPrice.price1}),Object(w.jsx)("span",{children:" / "}),Object(w.jsx)(m.a,{decimalScale:2,value:t.position.liquidationPrice.price2})]}):t.position.liquidationPrice.price1||t.position.liquidationPrice.price2?!t.position.liquidationPrice.price1&&t.position.liquidationPrice.price2?e=Object(w.jsxs)("span",{children:[Object(w.jsx)("span",{children:" -- "}),Object(w.jsx)("span",{children:" / "}),Object(w.jsxs)("span",{children:[" ",Object(w.jsx)(m.a,{decimalScale:2,value:t.position.liquidationPrice.price2})," "]})]}):t.position.liquidationPrice.price1&&!t.position.liquidationPrice.price2&&(e=Object(w.jsxs)("span",{children:[Object(w.jsxs)("span",{children:[" ",Object(w.jsx)(m.a,{decimalScale:2,value:t.position.liquidationPrice.price1})," "]}),Object(w.jsx)("span",{children:" / "}),Object(w.jsx)("span",{children:" -- "})]})):e=Object(w.jsxs)("span",{children:[Object(w.jsx)("span",{children:" -- "}),Object(w.jsx)("span",{children:" / "}),Object(w.jsx)("span",{children:" -- "})]}),o(e))}),[t.position,c.detail]),Object(w.jsx)("span",{children:l})}var S=Object(x.b)("wallet","trading","version","type")(Object(x.c)((function(e){var t=e.wallet,c=e.trading,i=e.version,j=e.lang,b=e.type,u=Object(a.useState)(!1),A=Object(r.a)(u,2),x=A[0],p=A[1],S=Object(a.useState)(""),I=Object(r.a)(S,2),B=I[0],M=I[1],Q=Object(a.useState)(""),E=Object(r.a)(Q,2),F=E[0],T=E[1],P=Object(a.useState)(""),R=Object(r.a)(P,2),Y=R[0],J=R[1],H=Object(a.useState)(!1),G=Object(r.a)(H,2),L=G[0],z=G[1],Z=Object(a.useState)(!1),U=Object(r.a)(Z,2),q=U[0],V=U[1],W=Object(a.useState)(!1),K=Object(r.a)(W,2),X=K[0],$=K[1],_=Object(a.useState)(""),ee=Object(r.a)(_,2),te=ee[0],ce=ee[1],ae=function(){var e=Object(l.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConnected()||!c.config){e.next=5;break}return e.next=3,Object(o.L)(t.detail.chainId,c.config.pool,t.detail.account,c.config.bTokenId).catch((function(e){return console.error("load balance error,maybe network is wrong")}));case 3:(a=e.sent)&&ce(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,Object(o.f)(t.detail.chainId,c.config.pool,t.detail.account,c.config.symbolId).finally((function(){return p(!1)}));case 3:(a=e.sent).success?ie():"string"===typeof a.error?alert(a.error||j["close-position-failed"]):"object"===Object(n.a)(a.error)?alert(a.error.errorMessage||j["close-position-failed"]):alert(j["close-position-failed"]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){c.refresh(),ae()},se=d()("Direction","info-num",{LONG:+c.position.volume>0,SHORT:+c.position.volume<0});return Object(a.useEffect)((function(){return ae(),function(){}}),[t.detail.account,c.config]),Object(a.useEffect)((function(){if(c.position){var e=c.position,t=+e.volume>0?j.long:Object(O.d)(e.volume,0)||!e.volume?"--":j.short;M(t),T(Object(o.e)(e.margin).plus(e.unrealizedPnl).toString()),J(Object(o.e)(e.margin).plus(e.unrealizedPnl).minus(e.marginHeld).toString())}return function(){}}),[c.position.volume,c.position.margin,c.position.unrealizedPnl]),Object(w.jsxs)("div",{className:"position-info",children:[Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text",children:j.position}),Object(w.jsx)("div",{className:"info-num",children:Object(w.jsx)(m.a,{value:c.position.volume,allowZero:!0})})]}),Object(w.jsx)("div",{className:"info-right",children:Object(w.jsxs)("div",{className:"close-position",id:"close-p",onClick:ne,children:[Object(w.jsx)("span",{className:"spinner spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{display:x?"block":"none"}}),Object(w.jsx)("img",{src:N})," ",j.close]})})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text",children:j["average-entry-price"]}),Object(w.jsx)("div",{className:"info-num",children:Object(w.jsx)(m.a,{value:c.position.averageEntryPrice,decimalScale:2})})]}),Object(w.jsx)("div",{className:"info-right"})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text balance-con",children:i.isV1||i.isV2Lite?Object(w.jsxs)(w.Fragment,{children:[j["balance-in-contract"],Object(w.jsx)("br",{})," (",j["dynamic-balance"],")"]}):j["dynamic-effective-balance"]}),Object(w.jsx)("div",{className:"info-num",children:Object(w.jsx)(m.a,{decimalScale:2,allowZero:!0,value:F})})]}),Object(w.jsx)("div",{className:"info-right action ".concat(i.current),children:i.isV1||i.isV2Lite||b.isOption?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"add-margin",id:"openAddMargin",onClick:function(){return V(!0)},children:[Object(w.jsx)("img",{src:g.a,alt:"add margin"})," ",j.add]}),Object(w.jsxs)("div",{className:"remove-margin",onClick:function(){return $(!0)},children:[Object(w.jsx)("img",{src:f.a,alt:"add margin"})," ",j.remove]})]}):Object(w.jsxs)("div",{onClick:function(){return z(!0)},children:[Object(w.jsx)("img",{src:h.a,alt:"Remove margin"})," ",j.detail]})})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text",children:j.direction}),Object(w.jsx)("div",{className:se,children:B})]}),Object(w.jsx)("div",{className:"info-right"})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text",children:j.margin}),Object(w.jsx)("div",{className:"info-num",children:Object(w.jsx)(m.a,{value:c.position.marginHeld,decimalScale:2})})]}),Object(w.jsx)("div",{className:"info-right"})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text",children:j["unrealized-pnl"]}),Object(w.jsx)("div",{className:"info-num",children:Object(w.jsxs)("span",{className:"pnl-list",children:[Object(w.jsx)(m.a,{value:c.position.unrealizedPnl,decimalScale:8}),(c.position.unrealizedPnlList?(i.isV2||i.isV2Lite)&&c.position.unrealizedPnlList.length:i.isV2||i.isV2Lite)&&Object(w.jsx)("img",{src:v.a,alt:"unrealizePnl"}),(i.isV2||i.isV2Lite)&&Object(w.jsx)("div",{className:"pnl-box",children:c.position.unrealizedPnlList&&c.position.unrealizedPnlList.map((function(e,t){return Object(w.jsxs)("div",{className:"unrealizePnl-item",children:[Object(w.jsx)("span",{children:e[0]}),Object(w.jsx)("span",{children:Object(w.jsx)(m.a,{value:e[1],decimalScale:8})})]},t)}))})]})})]}),Object(w.jsx)("div",{className:"info-right"})]}),Object(w.jsxs)("div",{className:"info",children:[b.isFuture&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text  funding-fee",title:j["funding-fee-tip"],children:j["funding-fee"]}),Object(w.jsx)("div",{className:"info-num",children:Object(w.jsx)(m.a,{value:-c.position.fundingFee,decimalScale:8})})]}),Object(w.jsx)("div",{className:"info-right"})]}),b.isOption&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text  funding-fee",title:j["funding-fee-tip"],children:j["funding-fee"]}),Object(w.jsx)("div",{className:"info-num",children:Object(w.jsx)(m.a,{value:-c.position.premiumFundingAccrued,decimalScale:8})})]}),Object(w.jsx)("div",{className:"info-right"})]})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"info-left",children:[Object(w.jsx)("div",{className:"title-text",children:j["liquidation-price"]}),Object(w.jsx)("div",{className:"info-num",children:b.isOption?Object(w.jsx)(C,{trading:c,wallet:t,lang:j}):Object(w.jsx)(m.a,{decimalScale:4,value:c.position.liquidationPrice})})]}),Object(w.jsx)("div",{className:"info-right"})]}),Object(w.jsx)(y,{wallet:t,modalIsOpen:q,onClose:function(){V(!1)},spec:c.config,afterDeposit:function(){V(!1),ie()},balance:te,className:"trading-dialog",lang:j}),Object(w.jsx)(k,{wallet:t,modalIsOpen:X,onClose:function(){$(!1)},spec:c.config,afterWithdraw:function(){$(!1),ie()},position:c.position,availableBalance:Y,className:"trading-dialog",lang:j}),Object(w.jsx)(D,{wallet:t,modalIsOpen:L,onClose:function(){z(!1)},spec:c.config,afterDepositAndWithdraw:function(){ie()},position:c.position,overlay:{background:"#1b1c22",top:80},className:"balance-list-dialog",lang:j})]})}))),I=c(614),B=c.n(I),M=c(612);var Q=c(90),E=c(618);const F=Q[o.a.get()].chainInfo;function T({wallet:e,his:t}){const[c,n]=Object(a.useState)(!1),i=()=>{n(!0)},s=()=>{n(!1)},l=d()("view",{hover:c});return Object(w.jsxs)("span",{className:l,onMouseOut:s,children:[Object(w.jsx)("span",{className:"view-space",onMouseOver:i,children:Object(w.jsxs)("a",{target:"_blank",rel:"noreferrer",href:`${F[e.detail.chainId].viewUrl}tx/${t.transactionHash}`,children:["View at ",F[e.detail.chainId].viewUrl]})}),Object(w.jsx)("span",{className:"right-arrow",onMouseOver:i,children:Object(w.jsx)("img",{alt:"",src:E.a})}),Object(w.jsx)("span",{className:"view-arrow",onMouseOver:i,onMouseOut:s,children:Object(w.jsx)("a",{target:"_blank",rel:"noreferrer",href:`${F[e.detail.chainId].viewUrl}tx/${t.transactionHash}`,children:Object(w.jsx)("img",{rel:"noreferrer",alt:"",src:"data:image/svg+xml;base64,DQo8c3ZnIGZpbGw9Im5vbmUiIGhlaWdodD0iMTAiIHdpZHRoPSIxMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNOC42NzYuNjQyYS42NS42NSAwIDAwLS4wNzIuMDA2SDQuNzkzYS42NS42NSAwIDAwLS41Ny45NzUuNjUuNjUgMCAwMC41Ny4zMjJINy4xMkwuNDM4IDguNjE0YS42NDcuNjQ3IDAgMDAuMjg2IDEuMDk2LjY1LjY1IDAgMDAuNjMyLS4xNzlMOC4wNCAyLjg2MXYyLjMyNGEuNjQ4LjY0OCAwIDAwLjk3Ny41Ny42NDguNjQ4IDAgMDAuMzIyLS41N1YxLjM4YS42NDcuNjQ3IDAgMDAtLjY2Mi0uNzM3eiIgZmlsbD0iI0FBQUFBQSIvPg0KPC9zdmc+DQoNCg=="})})})]})}var P=Object(x.b)("wallet","trading","type")(Object(x.c)((function({wallet:e,trading:t,lang:c,type:n}){const[i,s]=Object(a.useState)([]);return Object(a.useEffect)((()=>(async function(){if(e.isConnected()&&t.configs&&t.config&&t.contract){const e=t.history.map((e=>{e.directionText=c["long-buy"],"SHORT"===e.direction?e.directionText=c["short-sell"]:"liquidation"===e.direction.toLowerCase()&&(e.directionText=c.liquidation);const a=t.config;return a&&(e.baseTokenText=n.isOption?`${e.symbol} / ${e.baseToken}`:e.baseToken?` ${a.symbol} / ${a.bTokenSymbol}`:a.symbol),e}));s(e)}}(),()=>{})),[e.detail,t.configs,t.config,t.history]),Object(w.jsxs)("div",{className:"history-info","v-show":"historyShow",children:[i.map(((t,a)=>Object(w.jsxs)("div",{className:"history-box",children:[Object(w.jsxs)("div",{className:"direction-bToken-price",children:[Object(w.jsxs)("span",{className:"direction",children:[Object(w.jsxs)("span",{className:`${t.direction}`,children:[" ",t.directionText]}),Object(w.jsx)("span",{className:"basetoken",children:t.baseTokenText}),Object(w.jsx)(T,{wallet:e,his:t})]}),Object(w.jsx)("span",{className:"history-text time",children:B.a.asString("yyyy-MM-dd hh:mm:ss",new Date(parseInt(t.time)))})]}),Object(w.jsxs)("div",{className:"time-price-volume",children:[Object(w.jsxs)("div",{className:"history-price",children:[Object(w.jsxs)("div",{className:"history-title",children:[" ",n.isOption?c["volume-notional-price"]:c["volume-price"]]}),Object(w.jsxs)("div",{className:"history-text",children:[t.volume," @ ",Object(w.jsx)(m.a,{value:t.price,decimalScale:2,displayType:"text"})]})]}),Object(w.jsxs)("div",{className:"notional",children:[Object(w.jsxs)("div",{className:"history-title",children:[" ",n.isOption?c["contract-value"]:c.notional]}),Object(w.jsx)("div",{className:"history-text",children:Object(w.jsx)(m.a,{value:t.notional,decimalScale:4})})]}),Object(w.jsxs)("div",{className:"history-fee",children:[Object(w.jsx)("div",{className:"history-title pc",children:c["transaction-fee"]}),Object(w.jsx)("div",{className:"history-title mobile",children:c["transaction-fee"]}),Object(w.jsx)("div",{className:"history-text",children:Object(w.jsx)(m.a,{value:t.transactionFee,decimalScale:4})})]})]})]},a))),0==i.length?Object(w.jsx)("div",{className:"no-data",children:c["no-data"]}):""]})})));var R=Object(x.b)("wallet","trading","type")(Object(x.c)((function(e){e.wallet;var t=e.trading,c=e.lang,a=e.type;return Object(w.jsxs)("div",{className:"contract-box",children:[Object(w.jsx)("div",{className:"contract-header"}),Object(w.jsxs)("div",{className:"contract-info",children:[Object(w.jsx)("div",{className:"conntract-header",children:c["contract-info"]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c["base-token"]}),Object(w.jsx)("div",{className:"text",dangerouslySetInnerHTML:{__html:t.contract.bTokenSymbolDisplay&&t.contract.bTokenSymbolDisplay.map((function(e){return e}))}})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c.symbol}),Object(w.jsx)("div",{className:"text",children:t.contract.symbol})]}),a.isFuture&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c.multiplier}),Object(w.jsx)("div",{className:"text",children:t.contract.multiplier})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c["funding-rate-coefficient"]}),Object(w.jsx)("div",{className:"text",children:t.contract.fundingRateCoefficient})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c["min-initial-margin-ratio"]}),Object(w.jsx)("div",{className:"text",children:Object(w.jsx)(M.a,{displayType:"text",value:100*t.contract.minInitialMarginRatio,decimalScale:2,suffix:"%"})})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c["min-maintenance-margin-ratio"]}),Object(w.jsx)("div",{className:"text",children:Object(w.jsx)(M.a,{displayType:"text",value:100*t.contract.minMaintenanceMarginRatio,decimalScale:2,suffix:"%"})})]})]}),a.isOption&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c.underlier}),Object(w.jsx)("div",{className:"text",children:t.contract.underlier})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c.strike}),Object(w.jsx)("div",{className:"text",children:t.contract.strike})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsx)("div",{className:"title",children:c["option-type"]}),Object(w.jsx)("div",{className:"text",children:"C"===t.contract.optionType?"".concat(c.call):"".concat(c.put)})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"title",children:[" ",Object(w.jsxs)("span",{children:[c["min-trade-volume"]," ( ",c.notional," )"]})," "]}),Object(w.jsxs)("div",{className:"text",children:[t.contract.multiplier," ",t.config?t.config.unit:""]})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"title",children:[" ",Object(w.jsx)("span",{title:t.initialMarginRatioTip,className:"margin-per",children:c["initial-margin-ratio"]})," "]}),Object(w.jsx)("div",{className:"text",children:Object(w.jsx)(M.a,{displayType:"text",value:100*t.contract.initialMarginRatio,decimalScale:2,suffix:"%"})})]}),Object(w.jsxs)("div",{className:"info",children:[Object(w.jsxs)("div",{className:"title",children:[" ",Object(w.jsxs)("span",{title:t.maintenanceMarginRatioTip,className:"margin-per",children:[" ",c["maintenance-margin-ratio"]]})," "]}),Object(w.jsx)("div",{className:"text",children:Object(w.jsx)(M.a,{displayType:"text",value:100*t.contract.maintenanceMarginRatio,decimalScale:2,suffix:"%"})})]})]}),Object(w.jsxs)("div",{className:"info",children:[a.isFuture&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"title",children:c["transaction-fee"]})}),a.isOption&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"title",children:Object(w.jsx)("span",{className:"margin-per",title:t.TransactionFeeTip,children:c["transaction-fee"]})})}),Object(w.jsx)("div",{className:"text",children:Object(w.jsx)(M.a,{displayType:"text",value:100*t.contract.feeRatio,decimalScale:3,suffix:"%"})})]})]})]})}))),Y=c(91),J=c(646),H=c(750),G=(c(685),c(686),H.b.Handle);function L(e){var t=e.value,c=(e.dragging,e.index),a=Object(J.a)(e,["value","dragging","index"]);return Object(w.jsx)(H.a,{prefixCls:"rc-slider-tooltip",overlay:t||"",placement:"top",visible:!!t,overlayStyle:{display:"block"},overlayInnerStyle:{color:"#569BDA",background:"none",display:"block",fontSize:"10px",boxShadow:"none"},children:Object(w.jsx)(G,Object(Y.a)({value:t},a))},c)}function z(e){var t=e.max,c=void 0===t?"--":t,n=e.start,i=e.onValueChange,s=e.freeze,l=e.currentSymbolMarginHeld,j=e.originMarginHeld,b=e.setStopCalculate,u=Object(a.useState)(0),A=Object(r.a)(u,2),m=A[0],O=A[1],x=Object(a.useState)(0),p=Object(r.a)(x,2),f=p[0],g=p[1],h=Object(a.useState)(!1),v=Object(r.a)(h,2),N=v[0],y=v[1],k=Object(a.useState)({}),D=Object(r.a)(k,2),C=D[0],S=D[1],I=Object(a.useState)(!1),B=Object(r.a)(I,2),M=B[0],Q=B[1],E=Object(a.useState)(!1),F=Object(r.a)(E,2),T=F[0],P=F[1];Object(a.useEffect)((function(){return y(s),0===Math.abs(c)&&y(!0),function(){}}),[s,c]),Object(a.useEffect)((function(){var e=c;return 0!==Math.abs(c)&&"--"!==c||(c=100),isNaN(e)&&O(""),c&&S(function(e){for(var t={},c=+e/10,a=0;a<=10;a++)if(0===a||10===a){var n={top:"-16px",position:"relative"};10===a&&(n.width=100,n.left="-10px",n.paddingRight="10px"),t[a*c]=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:n,children:10===a?(a*c).toFixed(2):a*c}),Object(w.jsx)("div",{style:{top:"-16px",position:"relative"},children:"l"})]})}else t[a*c]="l";return t}(c)),O(+c),"--"!==e&&Q(!0),0!==Math.abs(c)&&0!==Math.abs(e)||Q(!1),function(){}}),[c]),Object(a.useEffect)((function(){return T||(isNaN(n)?g(0):g(n)),function(){}}),[n]);var R=d()("deri-slider",{controlled:M});return Object(w.jsx)(H.b,{handle:L,className:R,start:n,min:0,max:m,value:f,onChange:function(e){P(!0),b(!0),g(e),i(e,!1)},onAfterChange:function(e){if(l){var t=Object(o.e)(j).minus(l);Object(o.e)(e).lt(t)&&(g(t),i(t))}P(!1),b(!1)},disabled:N,overlay:f,step:.01,marks:C})}var Z=c(610),U=c(28);var q=c(621);function V(e){var t=e.version,c=e.spec;return e.type.isOption?"".concat(c.symbol||"BTCUSD-20000-C"):t.isV1||t.isV2Lite?"".concat(c.symbol||"BTCUSD"," / ").concat(c.bTokenSymbol||"BUSD"," (10X)"):"".concat(c.symbol||"BTCUSD"," (10X)")}var W=Object(x.b)("trading","version","loading","type")(Object(x.c)((function(e){var t=e.trading,c=e.version,n=e.setSpec,i=e.spec,s=e.loading,l=e.type,o=Object(a.useState)(!1),j=Object(r.a)(o,2),b=j[0],u=j[1],A=d()("dropdown-menu",{show:b});return Object(a.useEffect)((function(){return document.body.addEventListener("click",(function(e){document.querySelector(".btn-group")&&!document.querySelector(".btn-group").contains(e.target)&&u(!1)})),function(){}}),[]),Object(w.jsxs)("div",{className:"btn-group check-baseToken-btn",children:[Object(w.jsxs)("button",{type:"button",onClick:function(e){t.configs.length>0&&(e.preventDefault(),u(!b))},className:"btn chec",children:[Object(w.jsx)(V,{spec:i,version:c,type:l}),Object(w.jsx)("span",{className:"check-base-down",children:Object(w.jsx)("img",{src:q.a,alt:""})})]}),Object(w.jsx)("div",{className:A,children:t.configs.map((function(e,a){return Object(w.jsx)("div",{className:"dropdown-item",onClick:function(c){return function(e){var c=t.configs.find((function(t){return t.pool===e.pool&&e.symbolId===t.symbolId}));c&&(s.loading(),t.pause(),n(c),t.onSymbolChange(c,(function(){return s.loaded()}),l.isOption),u(!1))}(e)},children:Object(w.jsx)(V,{spec:e,version:c,type:l})},a)}))})]})}))),K=(c(155),Object(b.a)((function(e){var t=e.wallet,c=e.spec,n=e.onClose,i=e.direction,j=e.volume,d=e.position,b=void 0===d?0:d,u=e.indexPrice,A=e.leverage,m=e.transFee,O=e.afterTrade,x=e.lang,p=e.markPriceAfter,f=e.trading,g=Object(a.useState)(!1),h=Object(r.a)(g,2),v=h[0],N=h[1],y=function(){var e=Object(l.a)(s.a.mark((function e(){var a,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),j=U.a.isOption?Object(o.e)(j).div(Object(o.e)(f.contract.multiplier)).toString():j,j="long"===i?j:-+j,e.next=5,Object(o.Y)(t.detail.chainId,c.pool,t.detail.account,j,c.symbolId);case 5:(a=e.sent).success?(O(),n()):(l="string"===typeof a.error?a.error:a.error.errorMessage||a.error.message,alert(l)),N(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){v||n()},D="long"===i?+j+ +b:+b-+j;return Object(w.jsx)("div",{className:"modal-dialog",children:Object(w.jsxs)("div",{className:"modal-content",children:[Object(w.jsxs)("div",{className:"modal-header",children:[Object(w.jsx)("div",{className:"title",children:x.confirm}),Object(w.jsx)("div",{className:"close","data-dismiss":"modal",onClick:k,children:Object(w.jsx)("span",{children:"\xd7"})})]}),Object(w.jsx)("div",{className:"modal-body",children:Object(w.jsxs)("div",{className:"contract-box-info",children:[Object(w.jsxs)("div",{className:"top",children:[Object(w.jsxs)("div",{className:"text",children:[Object(w.jsxs)("div",{className:"text-title",children:["# ",x["of-contracts"]]}),Object(w.jsx)("div",{className:"text-num",children:"long"===i?j:"-".concat(j)})]}),Object(w.jsxs)("div",{className:"text",children:[Object(w.jsx)("div",{className:"text-title",children:x["position-after-execution"]}),Object(w.jsx)("div",{className:"text-num",children:D})]}),Object(w.jsxs)("div",{className:"text",children:[Object(w.jsx)("div",{className:"text-title",children:x.direction}),Object(w.jsx)("div",{className:"text-num",children:Object(w.jsx)("span",{className:i,children:x[i.toLowerCase()]})})]}),U.a.isFuture&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"text",children:[Object(w.jsx)("div",{className:"text-title",children:x["trade-price-estimated"]}),Object(w.jsx)("div",{className:"text-num",children:Object(w.jsx)(M.a,{value:u,decimalScale:2,displayType:"text"})})]})}),U.a.isOption&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"text",children:[Object(w.jsx)("div",{className:"text-title",children:x["trade-price"]}),Object(w.jsx)("div",{className:"text-num",children:Object(w.jsx)(M.a,{value:p,decimalScale:2,displayType:"text"})})]})}),U.a.isFuture&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"text",children:[Object(w.jsx)("div",{className:"text-title",children:x["leverage-after-execution"]}),Object(w.jsxs)("div",{className:"text-num",children:[A,"X"]})]})}),Object(w.jsxs)("div",{className:"text",children:[Object(w.jsx)("div",{className:"text-title",children:x["transaction-fee"]}),Object(w.jsx)("div",{className:"text-num",children:Object(w.jsx)(M.a,{value:m,decimalScale:2,suffix:" ".concat(c.bTokenSymbol),displayType:"text"})})]})]}),Object(w.jsx)("div",{className:"modal-footer",children:Object(w.jsxs)("div",{className:"long-btn","v-if":"confirm",children:[Object(w.jsx)("button",{className:"cancel",onClick:k,children:x.cancel}),Object(w.jsx)(Z.a,{className:"confirm",btnText:x.ok,click:y,lang:x})]})})]})})]})})}))),X=Object(b.a)(u.a),$=Object(b.a)(p.a);function _(e){var t=e.hasConnectWallet,c=e.wallet,n=e.spec,i=e.volume,j=e.available,d=e.baseToken,b=e.leverage,u=e.indexPrice,A=e.position,m=e.transFee,O=e.afterTrade,x=e.direction,p=e.trading,f=(e.symbolId,e.bTokenId),g=e.version,h=e.lang,v=e.type,N=e.markPriceAfter,y=Object(a.useState)(!0),k=Object(r.a)(y,2),D=k[0],C=k[1],S=Object(a.useState)(!0),I=Object(r.a)(S,2),B=I[0],M=I[1],Q=Object(a.useState)(!1),E=Object(r.a)(Q,2),F=E[0],T=E[1],P=Object(a.useState)(!1),R=Object(r.a)(P,2),Y=R[0],J=R[1],H=Object(a.useState)(""),G=Object(r.a)(H,2),L=G[0],z=G[1],U=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.approve(n.pool,f);case 2:e.sent.success?(C(!0),W()):(C(!1),alert(h["approve-failed"]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.refresh(),J(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){p.refresh(),J(!1)},W=function(){var e=Object(l.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t()||!n){e.next=5;break}return e.next=3,c.isApproved(n.pool,f);case 3:a=e.sent,C(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.isConnected()||!n){e.next=5;break}return e.next=3,Object(o.L)(c.detail.chainId,n.pool,c.detail.account,f).catch((function(e){return console.error("getWalletBalance was error,maybe network is Wrong")}));case 3:(t=e.sent)&&z(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return t()&&n&&_(),function(){}}),[c.detail.account,n,j]),Object(a.useEffect)((function(){return M(!i),function(){}}),[i]),Object(a.useEffect)((function(){return n&&W(),function(){}}),[c.detail.isApproved,n]);var ee=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(K,{wallet:c,className:"trading-dialog",spec:n,modalIsOpen:F,onClose:function(){return T(!1)},leverage:b,baseToken:d,volume:i,position:A.volume,indexPrice:u,transFee:m,afterTrade:O,direction:x,lang:h,markPriceAfter:N,trading:p}),Object(w.jsx)("button",{className:"short-submit",onClick:function(){return T(!0)},children:h.trade})]});return t()?D?!j||+j<=0?ee=Object(w.jsxs)(w.Fragment,{children:[g.isV2&&!v.isOption?Object(w.jsx)($,{wallet:c,modalIsOpen:Y,onClose:V,spec:p.config,afterDepositAndWithdraw:V,position:p.position,overlay:{background:"#1b1c22",top:80},className:"balance-list-dialog",lang:h}):Object(w.jsx)(X,{wallet:c,modalIsOpen:Y,onClose:function(){return J(!1)},spec:n,balance:L,afterDeposit:q,className:"trading-dialog",lang:h}),Object(w.jsx)("div",{className:"noMargin-text",children:0!==+p.position.margin&&p.position.margin?h["not-enough-margin-tip"]:h["no-margin-tip"]}),Object(w.jsx)("button",{className:"short-submit",onClick:function(){return J(!0)},children:h.deposit})]}):B&&(ee=Object(w.jsx)("button",{className:"btn btn-danger short-submit",children:h["enter-volume"]})):ee=Object(w.jsx)(Z.a,{className:"approve",btnText:h.approve,click:U,lang:h}):ee=Object(w.jsx)(Z.a,{className:"btn btn-danger connect",btnText:h["connect-wallet"],click:function(){c.connect()},lang:h}),Object(w.jsx)("div",{className:"submit-btn",children:ee})}var ee=Object(x.b)("wallet","trading","version","loading","type")(Object(x.c)((function(e){var t=e.wallet,c=void 0===t?{}:t,n=e.trading,i=e.version,j=e.lang,b=e.loading,u=e.type,A=Object(a.useState)("long"),O=Object(r.a)(A,2),x=O[0],p=O[1],f=Object(a.useState)(),g=Object(r.a)(f,2),h=g[0],v=g[1],N=Object(a.useState)({}),y=Object(r.a)(N,2),k=y[0],D=y[1],C=Object(a.useState)(""),S=Object(r.a)(C,2),I=S[0],B=S[1],M=Object(a.useState)(""),Q=Object(r.a)(M,2),E=Q[0],F=Q[1],T=Object(a.useState)(""),P=Object(r.a)(T,2),R=P[0],Y=P[1],J=Object(a.useState)({}),H=Object(r.a)(J,2),G=H[0],L=H[1],Z=Object(a.useState)("rise"),U=Object(r.a)(Z,2),q=U[0],V=U[1],K=Object(a.useState)("rise"),X=Object(r.a)(K,2),$=X[0],ee=X[1],te=Object(a.useState)(!0),ce=Object(r.a)(te,2),ae=ce[0],ne=ce[1],ie=Object(a.useState)(!1),se=Object(r.a)(ie,2),le=se[0],re=se[1],oe=Object(a.useState)(!1),je=Object(r.a)(oe,2),de=je[0],be=je[1],ue=Object(a.useState)(!1),Ae=Object(r.a)(ue,2),me=(Ae[0],Ae[1],Object(a.useRef)()),Oe=Object(a.useRef)(),xe=d()("checked-long","check-long-short"," long-short",{"checked-short":"short"===x}),pe=d()("contrant-input",{inputFamliy:""!==n.volume}),fe=function(){return k&&k.pool},ge=function(){return c&&c.detail&&c.detail.account},he=function(e){n.setVolume(""),p(e)},ve=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ge()&&fe()&&n.volumeDisplay)){e.next=6;break}return t=Ne(n.volumeDisplay),e.next=4,Object(o.n)(c.detail.chainId,k.pool,Math.abs(t),k.symbolId);case 4:a=e.sent,isNaN(a)||Y((+a).toFixed(2));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(e){return u.isOption?Object(o.e)(e).div(Object(o.e)(n.contract.multiplier)).toString():e},we=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ge()&&fe()&&n.volumeDisplay&&u.isFuture)){e.next=10;break}return t=c.detail,a="long"===x?n.volumeDisplay:-n.volumeDisplay,e.next=5,Object(o.t)(t.chainId,k.pool,k.symbolId);case 5:return i=e.sent,e.next=8,Object(o.p)(t.chainId,k.pool,a,k.symbolId);case 8:l=e.sent,i&&l&&L({curLiqUsed:i.liquidityUsed0,afterLiqUsed:l.liquidityUsed1});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ge()&&fe()&&n.volumeDisplay)){e.next=7;break}return t=Ne(n.volumeDisplay),a="long"===x?t:-t,e.next=5,Object(o.o)(c.detail.chainId,k.pool,a,k.symbolId);case 5:(i=e.sent)&&(l=u.isOption?i.deltaFunding1:i.fundingRate1,B(l));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ge()&&fe()&&n.volumeDisplay)){e.next=7;break}return t=Ne(n.volumeDisplay),a="long"===x?t:-t,e.next=5,Object(o.q)(c.detail.chainId,k.pool,a,k.symbolId);case 5:(i=e.sent)&&F(i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(e){e.target.setAttribute("class","contrant-input inputFamliy")},Ce=function(e){u.isOption?46!==e.which&&(e.which<48||e.which>57)&&e.preventDefault():u.isFuture&&(e.which<48||e.which>57)&&e.preventDefault()},Se=function(e){var t=e.target.value;"0"===t&&u.isFuture&&(t=""),n.setVolume(t),re(!0)},Ie=function(e){var t=e.target;if(u.isOption){var c=n.contract.multiplier.indexOf("."),a=n.contract.multiplier.slice(c).length-1,i=t.value,s=new RegExp("([0-9]+.[0-9]{".concat(a,"})[0-9]*"));i="0"===(i=i.replace(s,"$1"))?"":i,n.setVolume(i)}""===t.value&&t.setAttribute("class","contrant-input")};return Object(a.useEffect)((function(){var e;return n.position&&n.position.volume&&(e=+n.position.volume,p(e>=0?"long":"short")),function(){}}),[n.position.volume]),Object(a.useEffect)((function(){return de||""===n.volumeDisplay?c.detail.account&&n.resume():(n.pause(),ye(),u.isOption&&ke(),we(),ve()),function(){}}),[n.volumeDisplay,de]),Object(a.useEffect)((function(){return me.current>n.index?V("fall"):V("rise"),me.current=n.index,function(){}}),[n.index]),Object(a.useEffect)((function(){if(u.isOption){var e=n.position.markPrice;Oe.current>e?ee("fall"):ee("rise"),Oe.current=e,v(e)}}),[n.index,n.position]),Object(a.useEffect)((function(){return n.config&&D(n.config),function(){}}),[n.config]),Object(a.useEffect)((function(){b.loading(),n.init(c,i,u.isOption,(function(){b.loaded()}))}),[c.detail.account,i.current,u.isOption]),Object(a.useEffect)((function(){return n.margin&&n.direction&&p(n.direction),function(){}}),[n.margin]),Object(a.useEffect)((function(){return n.index&&c.isConnected()&&c.supportChain&&ne(!1),function(){}}),[c.detail.account,n.index]),Object(a.useEffect)((function(){return le||(n.position.volume>0?n.volume<0?p("short"):p("long"):n.position.volume<0&&(n.volume>0?p("short"):p("long"))),function(){}}),[n.volume,le]),Object(a.useEffect)((function(){return n.setUserSelectedDirection(x),function(){}}),[x]),Object(w.jsx)("div",{className:"trade-info",children:Object(w.jsxs)("div",{className:"trade-peration",children:[Object(w.jsxs)("div",{className:"check-baseToken",children:[Object(w.jsx)(W,{setSpec:D,spec:k,isOption:u.isOption}),Object(w.jsxs)("div",{className:u.isOption?"price-fundingRate pc options":"price-fundingRate pc",children:[u.isFuture&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"index-prcie",children:[j["index-price"],": ",Object(w.jsxs)("span",{className:q,children:["\xa0 ",Object(w.jsx)(m.a,{value:n.index,decimalScale:2})]})]})}),u.isOption&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"mark-price",children:[j["eo-mark-price"]," : ",Object(w.jsxs)("span",{className:$,children:["\xa0 ",Object(w.jsx)(m.a,{value:h,decimalScale:4})]})]}),Object(w.jsxs)("div",{className:"index-prcie",children:[n.config&&u.isOption?n.config.symbol.split("-")[0]:""," : ",Object(w.jsxs)("span",{className:"option-vol",children:["\xa0 ",Object(w.jsxs)("span",{children:[" ",Object(w.jsx)(m.a,{value:n.index,decimalScale:2})]}),Object(w.jsx)("span",{className:"vol",children:" | "}),j.vol," : ",Object(w.jsx)(m.a,{value:n.position.volatility,decimalScale:2,suffix:"%"})]})]})]}),Object(w.jsxs)("div",{className:"funding-rate",children:[u.isOption&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("span",{children:[j["funding-rate"]," : \xa0"]}),Object(w.jsx)("span",{className:"funding-per",title:n.optionFundingRateTip,children:Object(w.jsx)(m.a,{value:n.fundingRate.premiumFunding0,decimalScale:4})})]}),u.isFuture&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("span",{children:[j["funding-rate-annual"]," : \xa0"]}),Object(w.jsx)("span",{className:"funding-per",title:n.fundingRateTip,children:Object(w.jsx)(m.a,{value:n.fundingRate.fundingRate0,decimalScale:4,suffix:"%"})})]})]})]}),Object(w.jsxs)("div",{className:u.isOption?"price-fundingRate mobile options":"price-fundingRate mobile",children:[u.isFuture&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"index-prcie",children:[j.index,": ",Object(w.jsxs)("span",{className:q,children:["\xa0 ",Object(w.jsx)(m.a,{value:n.index,decimalScale:2})]})]})}),u.isOption&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"mark-price",children:[j["eo-mark-price"]," : ",Object(w.jsxs)("span",{className:$,children:["\xa0 ",Object(w.jsx)(m.a,{value:h,decimalScale:2})]})]}),Object(w.jsxs)("div",{className:"index-prcie",children:[n.config&&u.isOption?n.config.symbol.split("-")[0]:"",": ",Object(w.jsxs)("span",{className:q,children:["\xa0 ",Object(w.jsx)(m.a,{value:n.index,decimalScale:2})]})]}),Object(w.jsxs)("div",{className:"index-prcie",children:[j.vol,": ",Object(w.jsx)(m.a,{value:n.position.volatility,decimalScale:2})]})]}),Object(w.jsxs)("div",{className:"funding-rate",children:[u.isOption&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("span",{children:[j["funding-rate"]," : \xa0"]}),Object(w.jsx)("span",{className:"funding-per",title:n.optionFundingRateTip,children:Object(w.jsx)(m.a,{value:n.fundingRate.premiumFunding0,decimalScale:4})})]}),u.isFuture&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("span",{children:[j["funding-rate-annual"]," : \xa0"]}),Object(w.jsx)("span",{className:"funding-per",title:n.fundingRateTip,children:Object(w.jsx)(m.a,{value:n.fundingRate.fundingRate0,decimalScale:4,suffix:"%"})})]})]})]})]}),Object(w.jsxs)("div",{className:xe,children:[Object(w.jsx)("div",{className:"check-long",onClick:function(){return he("long")},children:j["long-buy"]}),Object(w.jsx)("div",{className:"check-short",onClick:function(){return he("short")},children:j["short-sell"]})]}),Object(w.jsxs)("div",{className:"the-input",children:[Object(w.jsxs)("div",{className:"left",children:[Object(w.jsxs)("div",{className:"current-position",children:[Object(w.jsx)("span",{children:j["current-position"]}),Object(w.jsx)("span",{className:"position-text",children:Object(w.jsx)(m.a,{value:n.position.volume,allowZero:!0})})]}),u.isFuture&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"contrant",children:[Object(w.jsx)("input",{type:"number",onFocus:De,onBlur:Ie,onKeyPress:Ce,disabled:!n.index||0===Math.abs(n.position.margin),onChange:function(e){return Se(e)},value:n.volumeDisplay,className:pe,placeholder:j["contract-volume"]}),Object(w.jsx)("div",{className:"title-volume",children:j["contract-volume"]})]})}),u.isOption&&Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"contrant option-input",children:[Object(w.jsx)("input",{type:"number",onFocus:De,onBlur:Ie,onKeyPress:Ce,disabled:!n.index||0===Math.abs(n.position.margin),onChange:function(e){return Se(e)},value:n.volumeDisplay,className:pe,placeholder:j["option-input"]}),Object(w.jsx)("div",{className:"option-unit",children:k.unit})]})}),!!n.volumeDisplay&&u.isFuture&&Object(w.jsx)("div",{className:"btc",children:Object(w.jsx)(m.a,{value:n.amount.exchanged,allowNegative:!1,decimalScale:4,prefix:"= ",suffix:" ".concat(k.unit)})})]}),Object(w.jsx)("div",{className:"right-info",children:Object(w.jsxs)("div",{className:"contrant-info ".concat(i.current),children:[Object(w.jsxs)("div",{className:"balance-contract",children:[i.isV1&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("span",{className:"balance-contract-text pc v1",children:[j["balance-in-contract"],Object(w.jsx)("br",{}),"(",j["dynamic-balance"],")"]}),Object(w.jsxs)("span",{className:"balance-contract-text mobile v1",children:[j["balance-in-contract"],Object(w.jsx)("br",{}),"(",j["dynamic-balance"],")"]})]}),(i.isV2||i.isV2Lite||u.isOption)&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{className:"balance-contract-text pc",title:j["dynamic-effective-balance-title"],children:j["dynamic-effective-balance"]}),Object(w.jsx)("span",{className:"balance-contract-text mobile",title:j["dynamic-effective-balance-title"],children:j["dynamic-effective-balance"]})]}),Object(w.jsx)("span",{className:"balance-contract-num ".concat(i.current),children:Object(w.jsx)(m.a,{value:n.amount.dynBalance,allowZero:!0,decimalScale:2})})]}),i.isV1&&Object(w.jsxs)("div",{className:"box-margin",children:[Object(w.jsx)("span",{children:j.margin}),Object(w.jsx)("span",{className:"margin",children:Object(w.jsx)(m.a,{value:n.amount.margin,allowZero:!0,decimalScale:2})})]}),(i.isV2||i.isV2Lite||u.isOption)&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"box-margin",children:j.margin}),Object(w.jsxs)("div",{className:"box-margin",children:[Object(w.jsxs)("span",{className:"total-held",title:j["total-held-title"],children:["\xa0- ",j["total-held"]]}),Object(w.jsx)("span",{className:"margin",children:Object(w.jsx)(m.a,{value:n.amount.margin,allowZero:!0,decimalScale:2})})]}),Object(w.jsxs)("div",{children:[Object(w.jsxs)("span",{className:"pos-held",title:j["for-this-pos-title"],children:["\xa0- ",j["for-this-pos"]," "]}),Object(w.jsx)("span",{className:"margin",children:Object(w.jsx)(m.a,{value:n.amount.currentSymbolMarginHeld,allowZero:!0,decimalScale:2})})]})]}),Object(w.jsxs)("div",{className:"available-balance",children:[Object(w.jsxs)("span",{className:"available-balance pc",title:j["available-balance-title"],children:[" ",j["available-balance"]," "]}),Object(w.jsx)("span",{className:"available-balance mobile",children:j["available-balance"]}),Object(w.jsx)("span",{className:"available-balance-num",children:Object(w.jsx)(m.a,{value:n.amount.available,allowZero:!0,decimalScale:2})})]})]})})]}),Object(w.jsx)("div",{className:"slider mt-13",children:Object(w.jsx)(z,{max:n.amount.dynBalance,onValueChange:function(e,t){n.setSlideMargin(e),re(!1),t&&p("long"===x?"short":"long")},start:n.amount.margin,freeze:ae,currentSymbolMarginHeld:n.position.marginHeldBySymbol,originMarginHeld:n.position.marginHeld,setStopCalculate:function(e){return be(e)}})}),Object(w.jsx)("div",{className:"title-margin",children:j.margin}),Object(w.jsx)("div",{className:"enterInfo",children:!!n.volumeDisplay&&Object(w.jsxs)(w.Fragment,{children:[u.isFuture&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"text-info",children:[Object(w.jsx)("div",{className:"title-enter pool",children:j["pool-liquidity"]}),Object(w.jsx)("div",{className:"text-enter poolL",children:Object(w.jsx)(m.a,{value:n.fundingRate.liquidity,decimalScale:2,suffix:" ".concat(k.bTokenSymbol)})})]}),Object(w.jsxs)("div",{className:"text-info",children:[Object(w.jsx)("div",{className:"title-enter",children:j["liquidity-used"]}),Object(w.jsxs)("div",{className:"text-enter",children:[Object(w.jsx)(m.a,{value:G.curLiqUsed,suffix:"%",decimalScale:2})," -> ",Object(w.jsx)(m.a,{value:G.afterLiqUsed,decimalScale:2,suffix:"%"})]})]}),Object(w.jsxs)("div",{className:"text-info",children:[Object(w.jsx)("div",{className:"title-enter",children:j["funding-rate-impact"]}),Object(w.jsxs)("div",{className:"text-enter",children:[Object(w.jsx)(m.a,{value:n.fundingRate.fundingRate0,suffix:"%",decimalScale:4})," -> ",Object(w.jsx)(m.a,{value:I,decimalScale:4,suffix:"%"})]})]})]}),u.isOption&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"text-info",children:[Object(w.jsx)("div",{className:"title-enter pool",children:j["mark-price"]}),Object(w.jsx)("div",{className:"text-enter poolL",children:Object(w.jsx)(m.a,{value:h,decimalScale:4})})]}),Object(w.jsxs)("div",{className:"text-info",children:[Object(w.jsx)("div",{className:"title-enter pool",children:j["trade-price"]}),Object(w.jsx)("div",{className:"text-enter poolL",children:Object(w.jsx)(m.a,{value:E,decimalScale:4})})]}),Object(w.jsxs)("div",{className:"text-info",children:[Object(w.jsx)("div",{className:"title-enter pool",children:j["pool-liquidity"]}),Object(w.jsx)("div",{className:"text-enter poolL",children:Object(w.jsx)(m.a,{value:n.fundingRate.liquidity,thousandSeparator:!0,decimalScale:2,suffix:" ".concat(k.bTokenSymbol)})})]})]}),Object(w.jsxs)("div",{className:"text-info",children:[Object(w.jsx)("div",{className:"title-enter",children:j["transaction-fee"]}),Object(w.jsx)("div",{className:"text-enter",children:Object(w.jsx)(m.a,{value:R,allowZero:!0,decimalScale:2,suffix:" ".concat(k.bTokenSymbol)})})]})]})}),Object(w.jsx)(_,{hasConnectWallet:ge,transFee:R,wallet:c,spec:n.config,indexPrice:n.index,available:n.amount.available,volume:n.volumeDisplay,direction:x,leverage:n.amount.leverage,afterTrade:function(){n.setVolume(""),n.refresh(),c.refresh()},position:n.position,trading:n,symbolId:n.config&&n.config.symbolId,bTokenId:n.config&&n.config.bTokenId,version:i,lang:j,type:u,markPriceAfter:E})]})})})));t.a=Object(x.b)("wallet","trading")(Object(x.c)((function({wallet:e,trading:t,isPro:c,lang:n}){const[i,s]=Object(a.useState)("trade"),l=e=>s(e),r=d()("trade-position",i);return Object(w.jsxs)("div",{className:r,children:[Object(w.jsx)("div",{className:"header-top",children:Object(w.jsxs)("div",{className:"header",children:[Object(w.jsx)("span",{className:"trade",onClick:()=>l("trade"),children:n.trade}),!c&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{className:"pc position",onClick:()=>l("position"),children:n["my-position"]}),Object(w.jsx)("span",{className:"mobile position",onClick:()=>l("position"),children:n["my-position"]}),Object(w.jsx)("span",{className:"history",onClick:()=>l("history"),children:n.history})]})]})}),Object(w.jsx)(ee,{lang:n}),Object(w.jsx)(S,{lang:n}),Object(w.jsx)(P,{wallet:e,spec:t.config,specs:t.configs,lang:n}),Object(w.jsx)(R,{lang:n})]})})))},686:function(e,t,c){},687:function(e,t,c){}}]);
//# sourceMappingURL=1.55f66846.chunk.js.map